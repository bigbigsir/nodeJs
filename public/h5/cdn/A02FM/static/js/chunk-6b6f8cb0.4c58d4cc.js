"use strict";(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6b6f8cb0"],{"3b98":function(e,t,a){var s=a("f43b");a.n(s).a},"4c64":function(e,t,a){a.r(t);var s=(a("99af"),a("5530")),i=a("0418"),c=a("84af"),n=(a("4de4"),a("4160"),a("d81d"),a("fb6a"),a("ac1f"),a("841c"),a("159b"),{name:"searchGame",props:{showSearch:Boolean},data:function(){return{search:null,lineList:[{name:"全部",code:null,selected:!1},{name:"1-4线",code:"1-4",selected:!1},{name:"5-9线",code:"5-9",selected:!1},{name:"15-25线",code:"15-25",selected:!1},{name:"30-50线",code:"30-50",selected:!1},{name:"51-243线",code:"51-243",selected:!1}],providerList:[{name:"全部",code:null,selected:!1},{name:"PT",code:"PT",selected:!1},{name:"MG",code:"MG",selected:!1},{name:"AG",code:"AG",selected:!1},{name:"TTG",code:"TTG",selected:!1},{name:"PP",code:"PP",selected:!1},{name:"PNG",code:"PNG",selected:!1}],recordList:[]}},created:function(){var e=localStorage.getItem("gameSearchRecordList")||"[]";this.recordList=JSON.parse(e)},destroyed:function(){},methods:{selectedItem:function(e,t){null===e.code?this[t].forEach(function(e){null!==e.code&&(e.selected=!1)}):this[t][0].selected=!1,e.selected=!e.selected},submit:function(){var e=this.lineList.filter(function(e){return e.selected}).map(function(e){return e.code}),t=this.providerList.filter(function(e){return e.selected}).map(function(e){return e.code});this.lineList[0].selected&&(e=null),this.providerList[0].selected&&(t=null),this.$emit("update:showSearch",!1),this.$emit("filterGames",{lineList:e,providerList:t,search:this.search}),this.search&&this.search!==this.recordList[0]&&this.recordList.unshift(this.search),localStorage.setItem("gameSearchRecordList",JSON.stringify(this.recordList.slice(0,3)))}}}),r=(a("a02b"),a("2877")),o=Object(r.a)(n,function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("div",{staticClass:"search page"},[s("div",{staticClass:"search__header"},[s("div",{staticClass:"search__input-wrapper"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:a.search,expression:"search",modifiers:{trim:!0}}],staticClass:"search__input",attrs:{type:"text",placeholder:"请输入关键字..."},domProps:{value:a.search},on:{input:function(e){e.target.composing||(a.search=e.target.value.trim())},blur:function(){return a.$forceUpdate()}}})])]),s("a",{staticClass:"search__cancel",attrs:{href:"javascript:void (0);"},on:{click:function(){return a.$emit("update:showSearch",!1)}}},[a._v("取消")])]),s("div",{staticClass:"search__content"},[s("h6",{staticClass:"search__title"},[a._v("游戏平台")]),s("ul",{staticClass:"search__list clearfix"},a._l(a.providerList,function(e,t){return s("li",{key:t,staticClass:"search__item",class:{active:e.selected},on:{click:function(){return a.selectedItem(e,"providerList")}}},[a._v(" "+a._s(e.name)+" ")])}),0),s("h6",{staticClass:"search__title"},[a._v("赔付线")]),s("ul",{staticClass:"search__list clearfix"},a._l(a.lineList,function(e,t){return s("li",{key:t,staticClass:"search__item",class:{active:e.selected},on:{click:function(){return a.selectedItem(e,"lineList")}}},[a._v(" "+a._s(e.name)+" ")])}),0),s("ul",{staticClass:"search__record"},a._l(a.recordList,function(e,t){return s("li",{key:t,staticClass:"search__record-item border-bottom",on:{click:function(){a.search=e}}},[s("span",[a._v(a._s(e))]),s("i",{staticClass:"search__icon-record",on:{click:function(e){return e.stopPropagation(),a.recordList.splice(t,1)}}})])}),0),s("button",{staticClass:"search__button button",on:{click:a.submit}},[a._v("确定")])])])},[],!1,null,"4b54cd69",null).exports,l=a("ca00"),m=a("06de"),d=a("5880"),h={name:"games",components:{Header:i.a,Banner:c.a,searchGame:o},data:function(){return{tabs:[{name:"全部"},{name:"热门",params:{isHot:!0}},{name:"彩金池",params:{isPool:!0}},{name:"最新游戏",params:{isNew:!0}},{name:"我的收藏",params:{isFavorite:!0}}],activeTabIndex:0,tabFixed:!1,gameList:[],pageParams:{page:1,pageSize:10},filterParams:{},pageData:{},isLoadAll:!1,showSearch:!1}},computed:Object(s.a)({},Object(d.mapState)(["gameStatus"]),{},Object(d.mapGetters)(["loginStatus"]),{wmsImgPath:function(){var e=window.OMConfig.wmsServer,t=window.OMConfig.wmsCdnPath,a=window.OMConfig.wmsEnvPath;return"".concat(e+t,"/_wms/img/").concat(a,"/electronicgames/")},activeTab:function(){return this.tabs[this.activeTabIndex]}}),activated:function(){var e=this;this.tabFixed=!1,this.gameList.length||this.$loading.open("loadGames"),this.getGames().then(function(){e.$loading.hide("loadGames")}).catch(function(){e.$loading.hide("loadGames")})},deactivated:function(){this.isLoadAll=!1,this.activeTabIndex=0,this.pageParams={page:1,pageSize:10},this.$loading.hide("loadGames")},methods:{getGames:function(){var t=this,e=window.OMConfig.wmsServer,a=window.OMConfig.wmsEnvPath,s=window.OMConfig.wmsCdnPath,i="".concat(e+s,"/_wms/js/").concat(a,"/electronicgames/games.js");return Object(m.a)(i).then(function(e){t.gameList=e,t.pageData=Object(m.b)(t.gameList,t.pageParams)})},getPageData:function(){this.pageData=Object(m.b)(this.gameList,Object(s.a)({},this.pageParams,{},this.filterParams,{},this.activeTab.params))},filterGames:function(e){this.$refs.container.scrollIntoView(),this.pageParams={page:1,pageSize:10},this.filterParams=e,this.getPageData()},getGameStatus:function(e){return this.gameStatus[e]&&0===this.gameStatus[e].flag},toggleTab:function(e){var a=this,t=this.$refs.container.scrollTop;this.activeTabIndex=e,Object(l.a)(t,0,2,function(e,t){a.$refs.container.scrollTo(0,e),t&&(a.pageParams.page=1,a.filterParams={},a.getPageData())})},scroll:function(e){var t=e.target.scrollTop,a=e.target.scrollHeight-(t+e.target.clientHeight);this._scrollTop<t&&a<100&&this.loadNextPage(),this.tabFixed=t>this.$refs.tab.offsetTop,this._scrollTop=t},loadNextPage:function(){var e=this;this.pageParams.page<this.pageData.maxPage?(this.pageParams.page++,this.getPageData()):this.isLoadAll||(this.isLoadAll=!0,this.$toast({type:"error",message:"已经到底了~",callback:function(){e.isLoadAll=!1}}))}}},g=(a("3b98"),Object(r.a)(h,function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("div",{staticClass:"games page"},[s("Header",{scopedSlots:a._u([{key:"right",fn:function(){return[s("button",{staticClass:"games__search header__button",on:{click:function(){a.showSearch=!0}}},[s("i",{staticClass:"games__icon-search"}),a._v("搜游戏 ")])]},proxy:!0}])}),s("div",{ref:"container",staticClass:"container",on:{scroll:a.scroll}},[s("banner",{attrs:{field:"game_new"}}),s("div",{ref:"tab",staticClass:"games__tab"},[s("ul",{staticClass:"games__tab-list border-bottom",class:{fixed:a.tabFixed},on:{touchmove:function(e){e.preventDefault()}}},a._l(a.tabs,function(e,t){return s("li",{key:t,staticClass:"games__tab-item",class:{active:a.activeTabIndex===t},on:{click:function(){return a.toggleTab(t)}}},[a._v(" "+a._s(e.name)+" ")])}),0)]),s("ul",{staticClass:"games__list clearfix"},[a._l(a.pageData.data,function(e,t){return s("li",{key:t,staticClass:"games__item"},[s("a",{staticClass:"games__img-wrapper default-bg-small",attrs:{href:"javascript:void (0);"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.wmsImgPath+e.imgUrl,expression:"wmsImgPath+item.imgUrl"}],staticClass:"games__img",attrs:{alt:e.cnName}}),!a.loginStatus&&e.canTry?s("i",{staticClass:"home__icon-try"}):a._e(),s("i",{staticClass:"games__heart"}),s("p",{staticClass:"games__tag-wrapper"},[s("span",{staticClass:"games__tag games__tag--provider"},[a._v(a._s(e.provider))]),e.isPromo?s("span",{staticClass:"games__tag games__tag--promo"},[a._v("特惠")]):a._e(),e.line?s("span",{staticClass:"games__tag games__tag--line"},[a._v(a._s(e.line)+"线")]):a._e(),e.isPool?s("span",{staticClass:"games__tag games__tag--jackpot"},[a._v("彩金")]):a._e()]),a.getGameStatus(e.gameCode)?s("div",{staticClass:"maintain-mask"},[a._m(0,!0)]):a._e()]),s("p",{staticClass:"games__name"},[a._v(a._s(e.cnName))])])}),a.pageData.data&&a.pageData.data.length?a._e():s("li",{staticClass:"games__no-data-tips"},[a._v("很抱歉,没有找到与之相关的游戏~")])],2)],1),a.showSearch?s("searchGame",{attrs:{showSearch:a.showSearch},on:{filterGames:a.filterGames,"update:showSearch":function(e){a.showSearch=e},"update:show-search":function(e){a.showSearch=e}}}):a._e()],1)},[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"maintain-mask__inner"},[a("i",{staticClass:"maintain-mask__icon"}),a("p",{staticClass:"maintain-mask__text"},[e._v("维护中")])])}],!1,null,"39536e9e",null));t.default=g.exports},a02b:function(e,t,a){var s=a("c125");a.n(s).a},c125:function(){},f43b:function(){}}]);