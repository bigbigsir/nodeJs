{"version":3,"sources":["webpack:///./src/views/dewFigure.vue?a465","webpack:///./src/views/dewFigure.vue?d91b","webpack:///src/views/dewFigure.vue","webpack:///./src/views/dewFigure.vue?090e","webpack:///./src/views/dewFigure.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","vid","countdown","banker","tie","player","directives","name","rawName","value","expression","_e","showShuffle","attrs","on","staticRenderFns","data","ctx","columns","rows","cellSizeWidth","cellSizeHeight","lineWidth","resultColor","showLoading","resultList","timer","timerText","lastGameCode","computed","origin","cellHeight","cellWidth","gridWidth","gridHeight","filter","mounted","dpr","Math","ceil","canvas","width","height","style","canvasWrapper","scale","formatResultList","socketResultList","methods","drawGrid","beginPath","strokeStyle","lineColor","moveTo","x","lineTo","stroke","y","drawCircle","arc","circleRadii","fillStyle","circleFillColor","circleBorderColor","circleBorderWidth","fill","drawLine","start","end","color","drawText","cxt","font","textAlign","textBaseline","fillText","text","drawDewFigure","clearRect","bigRoadData","forEach","column","item","tieNumber","closePath","formatItemData","pair","banker_val","player_val","obj","result","formatBigRoadData","list","bigRoadList","length","columnLastItem","isAddNewColumn","push","resultFlag","countdownFunc","clearInterval","setInterval","newShoes","newRound","seconds","closeRound","console","log","key","roundRes","hasOwnProperty","sockets","e","JSON","parse","gmcode","component"],"mappings":"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","file":"cdn/A02FM/js/chunk-d8449532.0b4dca85.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dewFigure.vue?vue&type=style&index=0&id=0cd04e1a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dewFigure.vue?vue&type=style&index=0&id=0cd04e1a&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"dew-figure-container\"},[_c('div',{staticClass:\"dew-figure-header clearfix\"},[_c('span',{staticClass:\"game-table\"},[_vm._v(_vm._s(_vm.vid)+\"桌\")]),_c('span',{staticClass:\"timer-text\"},[_c('i',{staticClass:\"icon-time\"}),_c('span',{staticClass:\"monospaced-font\"},[_vm._v(\" 00\"),_c('span',[_vm._v(\":\")]),_vm._v(_vm._s(_vm.countdown>9?_vm.countdown:(\"0\" + _vm.countdown))+\" \")])])]),_c('div',{staticClass:\"scoreboard clearfix\"},[_c('span',{staticClass:\"scoreboard-item\"},[_c('span',[_vm._v(\"庄\")]),_c('span',[_vm._v(_vm._s(_vm.banker))])]),_c('span',{staticClass:\"scoreboard-item\"},[_c('span',[_vm._v(\"和\")]),_c('span',[_vm._v(_vm._s(_vm.tie))])]),_c('span',{staticClass:\"scoreboard-item\"},[_c('span',[_vm._v(\"闲\")]),_c('span',[_vm._v(_vm._s(_vm.player))])])]),_c('div',{staticClass:\"canvas-container\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showShuffle),expression:\"showShuffle\"}],staticClass:\"shuffle-wrapper\"},[_c('span',{staticClass:\"shuffle-text\"},[_vm._v(\"洗牌中\")])]),(_vm.showLoading)?_c('div',{staticClass:\"loading-wrapper\"},[_c('span',{staticClass:\"loading-text\"},[_vm._v(\"loading...\")])]):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showShuffle),expression:\"!showShuffle\"}],staticClass:\"canvas-wrapper\",attrs:{\"id\":\"canvasWrapper1\"}},[_c('canvas',{attrs:{\"id\":\"canvas1\"}})])]),_c('div',{staticClass:\"button-wrapper\"},[_c('button',{staticClass:\"submit-button\",on:{\"click\":function (){ return null; }}},[_c('span',{staticClass:\"button-text\"},[_vm._v(\"快速入座\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <div class=\"dew-figure-container\">\n      <div class=\"dew-figure-header clearfix\">\n        <span class=\"game-table\">{{vid}}桌</span>\n        <span class=\"timer-text\">\n        <i class=\"icon-time\"></i>\n        <span class=\"monospaced-font\">\n          00<span>:</span>{{countdown>9?countdown:`0${countdown}`}}\n        </span>\n      </span>\n      </div>\n      <div class=\"scoreboard clearfix\">\n      <span class=\"scoreboard-item\">\n        <span>庄</span>\n        <span>{{banker}}</span>\n      </span>\n        <span class=\"scoreboard-item\">\n        <span>和</span>\n        <span>{{tie}}</span>\n      </span>\n        <span class=\"scoreboard-item\">\n        <span>闲</span>\n        <span>{{player}}</span>\n      </span>\n      </div>\n      <div class=\"canvas-container\">\n        <div v-show=\"showShuffle\" class=\"shuffle-wrapper\">\n          <span class=\"shuffle-text\">洗牌中</span>\n        </div>\n        <div v-if=\"showLoading\" class=\"loading-wrapper\">\n          <span class=\"loading-text\">loading...</span>\n        </div>\n        <div v-show=\"!showShuffle\" id=\"canvasWrapper1\" class=\"canvas-wrapper\">\n          <canvas id=\"canvas1\" class=\"\"></canvas>\n        </div>\n      </div>\n      <div class=\"button-wrapper\">\n        <button @click=\"()=>null\" class=\"submit-button\">\n          <span class=\"button-text\">快速入座</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nexport default {\n  name: 'dewFigure',\n  data() {\n    return {\n      ctx: null,\n      vid: 'B001',\n      columns: 16,\n      rows: 6,\n      cellSizeWidth: 23,\n      cellSizeHeight: 23,\n      lineWidth: 1,\n      resultColor: {\n        banker: '#d55263',\n        player: '#6e8df7',\n        tie: '#4ea950'\n      },\n      showLoading: true,\n      showShuffle: true,\n      resultList: [],\n      timer: null,\n      countdown: 0,\n      timerText: null,\n      lastGameCode: null\n    }\n  },\n  computed: {\n    ...mapState(['socketResultList']),\n    origin() {\n      return this.lineWidth / 2\n    },\n    cellHeight() {\n      return this.cellSizeHeight + this.lineWidth\n    },\n    cellWidth() {\n      return this.cellSizeWidth + this.lineWidth\n    },\n    gridWidth() {\n      return this.lineWidth + (this.columns * this.cellWidth)\n    },\n    gridHeight() {\n      return this.lineWidth + (this.rows * this.cellHeight)\n    },\n    banker() {\n      return this.resultList.filter(item => item.result === 'banker').length\n    },\n    player() {\n      return this.resultList.filter(item => item.result === 'player').length\n    },\n    tie() {\n      return this.resultList.filter(item => item.result === 'tie').length\n    }\n  },\n  mounted() {\n    const canvas = document.getElementById('canvas1')\n    const canvasWrapper = document.getElementById('canvasWrapper1')\n    const ctx = canvas.getContext('2d')\n    let dpr = window.devicePixelRatio\n    if (dpr) {\n      dpr = Math.ceil(dpr)\n      dpr = dpr > 2 ? dpr : 4\n      canvas.width = this.gridWidth * dpr\n      canvas.height = this.gridHeight * dpr\n      canvas.style.width = this.gridWidth + 'px'\n      canvas.style.height = this.gridHeight + 'px'\n      canvasWrapper.style.width = this.gridWidth + 'px'\n      canvasWrapper.style.height = this.gridHeight + 'px'\n      ctx.scale(dpr, dpr)\n    }\n    this.ctx = ctx\n    this.formatResultList(this.socketResultList)\n  },\n  methods: {\n    // 画网格线\n    drawGrid(ctx) {\n      const lineColor = '#202020'\n      // 画竖线（列）\n      for (let x = this.origin; x <= this.gridWidth; x += this.cellWidth) {\n        ctx.beginPath()\n        ctx.strokeStyle = lineColor\n        ctx.lineWidth = this.lineWidth\n        ctx.moveTo(x, 0)\n        ctx.lineTo(x, this.gridHeight)\n        ctx.stroke()\n      }\n      // 画横线 （行）\n      for (let y = this.origin; y <= this.gridHeight; y += this.cellHeight) {\n        ctx.beginPath()\n        ctx.strokeStyle = lineColor\n        ctx.lineWidth = this.lineWidth\n        ctx.moveTo(0, y)\n        ctx.lineTo(this.gridWidth, y)\n        ctx.stroke()\n      }\n    },\n    // 画圆\n    drawCircle(ctx, x, y, color) {\n      const circleFillColor = '#141414'\n      const circleBorderColor = color\n      const circleBorderWidth = 3\n      const circleRadii = 8\n      ctx.beginPath()\n      ctx.arc(x, y, circleRadii, 0, 360, false)\n      ctx.fillStyle = circleFillColor\n      ctx.strokeStyle = circleBorderColor\n      ctx.lineWidth = circleBorderWidth\n      ctx.fill()\n      ctx.stroke()\n    },\n    // 画斜线\n    drawLine(ctx, start, end, width, color) {\n      ctx.beginPath()\n      ctx.moveTo(start[0], start[1])\n      ctx.lineTo(end[0], end[1])\n      ctx.lineWidth = width\n      ctx.strokeStyle = color\n      ctx.stroke()\n    },\n    // 画文字\n    drawText(cxt, x, y, text, font) {\n      cxt.beginPath()\n      cxt.font = font\n      cxt.fillStyle = '#fff'\n      cxt.textAlign = 'center'\n      cxt.textBaseline = 'middle'\n      cxt.fillText(text, x, y)\n      cxt.stroke()\n    },\n    // 绘制露珠图\n    drawDewFigure(ctx) {\n      const bigRoadData = this.formatBigRoadData(this.resultList).slice(-(this.columns - 1))\n      ctx.clearRect(0, 0, this.gridWidth, this.gridHeight)\n      this.drawGrid(ctx)\n      bigRoadData.forEach((column, columnIndex) => {\n        column.forEach((item, itemIndex) => {\n          const x = (columnIndex + 1) * this.cellWidth - this.cellSizeWidth / 2\n          const y = (itemIndex + 1) * this.cellHeight - this.cellSizeHeight / 2\n          this.drawCircle(ctx, x, y, item.color)\n          if (item.tieNumber) {\n            const offset = 3\n            const start = columnIndex * this.cellWidth + this.origin\n            const end = itemIndex * this.cellHeight + this.origin\n            this.drawLine(ctx, [start + offset, end + this.cellHeight - offset], [start + this.cellWidth - offset, end + offset], 2, this.resultColor.tie)\n            if (item.tieNumber > 1 && item.tieNumber < 10) {\n              this.drawText(ctx, Math.ceil(x), Math.ceil(y), '2', '16px Calibri')\n            } else if (item.tieNumber > 10) {\n              this.drawText(ctx, x, Math.ceil(y), '18', '12px Calibri')\n            }\n          }\n        })\n      })\n      ctx.closePath()\n    },\n    // 格式化当前桌台历史数据\n    formatItemData(item) {\n      const obj = {\n        pair: item.pair // 对子 0：无、1：庄对、2：闲对、3：庄闲对\n      }\n      if (item.banker_val > item.player_val) {\n        obj.result = 'banker' // 庄赢\n      } else if (item.banker_val < item.player_val) {\n        obj.result = 'player' // 闲赢\n      } else {\n        obj.result = 'tie' // 和\n      }\n      return obj\n    },\n    // 格式化大路露珠图数据\n    formatBigRoadData(list = []) {\n      let column // 当前列\n      let columnLastItem // 当前列最后一项\n      let resultFlag // 结果标志\n      let tieNumber = 0 // 和局次数\n      const bigRoadList = [] // 大路图数据\n      let isAddNewColumn = false // 是否新增一行\n      list.forEach(item => {\n        column = bigRoadList[bigRoadList.length - 1]\n        columnLastItem = column && column[column.length - 1]\n        isAddNewColumn = item.result !== 'tie' &&\n          (resultFlag !== item.result || (column && column.length >= this.rows))\n        if (isAddNewColumn) {\n          bigRoadList.push([])\n        }\n        column = bigRoadList[bigRoadList.length - 1]\n        if (item.result === 'tie') {\n          if (columnLastItem) {\n            columnLastItem.tieNumber += 1\n            tieNumber = 0\n          } else {\n            tieNumber += 1\n          }\n          resultFlag = (columnLastItem && columnLastItem.result)\n        } else {\n          column.push({\n            ...item,\n            tieNumber,\n            color: this.resultColor[item.result]\n          })\n          tieNumber = 0\n          resultFlag = item.result\n        }\n      })\n      return bigRoadList\n    },\n    // 倒计时\n    countdownFunc(text) {\n      this.timerText = null\n      clearInterval(this.timer)\n      if (this.countdown === 0) {\n        this.timerText = text\n      }\n      this.timer = setInterval(() => {\n        if (this.countdown > 0) {\n          this.countdown--\n        } else {\n          this.timerText = text\n          clearInterval(this.timer)\n        }\n      }, 1000)\n    },\n    // 洗牌中\n    newShoes() {\n      this.countdown = 0\n      this.countdownFunc('洗牌中')\n      this.showShuffle = true\n      this.resultList = []\n      this.drawDewFigure(this.ctx)\n    },\n    // 开始一局\n    newRound(seconds) {\n      this.showShuffle = false\n      this.countdown = seconds\n      this.countdownFunc('结算中')\n    },\n    // 结束一局\n    closeRound(obj) {\n      this.countdown = 0\n      this.countdownFunc('发牌中')\n      this.resultList = [...this.resultList, this.formatItemData(obj)]\n      this.drawDewFigure(this.ctx)\n    },\n    // 连接后推送的历史数据\n    formatResultList(obj) {\n      obj = obj[this.vid] || {}\n      console.log(obj)\n      const roundRes = obj.roundRes || {}\n      let key\n      let item\n      const list = []\n      for (key in roundRes) {\n        if (roundRes.hasOwnProperty(key)) {\n          item = this.formatItemData(roundRes[key])\n          list.push(item)\n        }\n      }\n      if (!list.length) {\n        this.newShoes()\n      } else {\n        this.resultList = list\n        this.newRound(obj.seconds)\n        this.drawDewFigure(this.ctx)\n      }\n      this.showLoading = false\n    }\n  },\n  sockets: {\n    'connect_error'(e) {\n      console.log('connect_error:\\n', e)\n    },\n    'connect_timeout'(e) {\n      console.log('connect_timeout:\\n')\n      console.log(e)\n    },\n    'reconnect_error'(e) {\n      console.log('reconnect_error\\n')\n      console.log(e)\n    },\n    'reconnect_failed'(e) {\n      console.log('reconnect_failed\\n')\n      console.log(e)\n    },\n    'result list'(obj) {\n      this.formatResultList(JSON.parse(obj))\n    },\n    'new shoes'(obj) {\n      obj = JSON.parse(obj)\n      if (obj.vid === this.vid) {\n        this.newShoes()\n        console.log('new shoes:\\n', obj)\n      }\n    },\n    'new round'(obj) {\n      obj = JSON.parse(obj)\n      if (obj.vid === this.vid) {\n        this.newRound(obj.seconds)\n        console.log('new round:\\n', obj)\n      }\n    },\n    'close round'(obj) {\n      obj = JSON.parse(obj)\n      if (obj.vid === this.vid && this.lastGameCode !== obj.gmcode) {\n        this.closeRound(obj)\n        console.log('close round:\\n', obj)\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  canvas {\n    vertical-align: top;\n  }\n\n  .dew-figure-container {\n    width: 398px;\n    margin: 0 auto;\n    font-size: 16px;\n    background-color: #141414;\n  }\n\n  .dew-figure-header {\n    padding: 16px 20px 0;\n    margin-bottom: 16px;\n    font-size: 18px;\n    line-height: 20px;\n    color: #fff;\n\n    .game-table {\n      float: left;\n    }\n\n    .icon-time {\n      display: inline-block;\n      width: 19px;\n      height: 19px;\n      margin-right: 8px;\n      vertical-align: top;\n      background: no-repeat center /100%;\n\n      @include background-image('~@/assets/img/home/dew_figure/time.png');\n    }\n\n    .timer-text {\n      float: right;\n      color: #697081;\n    }\n  }\n\n  .scoreboard {\n    box-sizing: content-box;\n    width: 286px;\n    padding: 8px;\n    margin: 0 auto 18px;\n    text-align: center;\n    border: 1px solid #31353d;\n    border-radius: 20px;\n  }\n\n  .scoreboard-item {\n    box-sizing: border-box;\n    float: left;\n    width: 33.33%;\n    height: 18px;\n    font-weight: 700;\n    line-height: 18px;\n    border-right: 1px solid #31353d;\n\n    &:first-child {\n      color: #e54560;\n    }\n\n    &:nth-child(2) {\n      color: #24b253;\n    }\n\n    &:last-child {\n      color: #668cff;\n      border-right: none;\n    }\n\n    span:first-child {\n      margin-right: 3px;\n    }\n  }\n\n  .canvas-container {\n    position: relative;\n    min-height: 142px;\n    margin-bottom: 18px;\n  }\n\n  .shuffle-wrapper,\n  .loading-wrapper {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 3;\n    color: #938f8b;\n    text-align: center;\n  }\n\n  .shuffle-wrapper {\n    display: none;\n    background: #000 no-repeat center -18px;\n\n    @include background-image('~@/assets/img/home/dew_figure/shuffle.gif');\n  }\n\n  .shuffle-text {\n    position: relative;\n    top: 88px;\n  }\n\n  .loading-wrapper {\n    background: #000 no-repeat center 45px;\n\n    @include background-image('~@/assets/img/home/dew_figure/loading.gif');\n  }\n\n  .loading-text {\n    position: relative;\n    top: 72px;\n  }\n\n  .canvas-wrapper {\n    position: relative;\n    min-height: 142px;\n    text-align: center;\n    background: #0e0e0e no-repeat center;\n  }\n\n  .canvas {\n    width: 383px;\n    height: 142px;\n    vertical-align: top;\n  }\n\n  .button-wrapper {\n    text-align: center;\n\n    .button-text {\n      position: relative;\n      z-index: 3;\n      color: #cca352;\n      transition: color 0.6s cubic-bezier(0.8, 0, 0.2, 1) 0s;\n    }\n\n    .submit-button {\n      position: relative;\n      display: inline-block;\n      width: 136px;\n      height: 38px;\n      line-height: 38px;\n      cursor: pointer;\n      background-color: transparent;\n      border: 1px solid #c39a4f;\n      outline: none;\n      transition: all 0.2s ease;\n\n      &::before {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        z-index: 2;\n        content: '\\20';\n        background-color: #ba8d4d;\n        opacity: 0.9;\n        transition: transform 0.6s cubic-bezier(0.8, 0, 0.2, 1);\n        transform: scale(0, 1);\n        transform-origin: right top;\n      }\n\n      &:hover {\n        .button-text {\n          color: #fff;\n        }\n\n        &::before {\n          transform: scale(1, 1);\n          transform-origin: left top;\n        }\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dewFigure.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dewFigure.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dewFigure.vue?vue&type=template&id=0cd04e1a&scoped=true&\"\nimport script from \"./dewFigure.vue?vue&type=script&lang=js&\"\nexport * from \"./dewFigure.vue?vue&type=script&lang=js&\"\nimport style0 from \"./dewFigure.vue?vue&type=style&index=0&id=0cd04e1a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0cd04e1a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}