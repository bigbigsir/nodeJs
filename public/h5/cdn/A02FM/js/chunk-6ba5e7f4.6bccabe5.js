"use strict";(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6ba5e7f4"],{"4c64":function(e,a,t){t.r(a);var s=(t("99af"),t("5530")),i=t("0418"),c=t("84af"),n=(t("4de4"),t("4160"),t("d81d"),t("fb6a"),t("ac1f"),t("841c"),t("159b"),{name:"searchGame",props:{showSearch:Boolean},data:function(){return{search:null,lineList:[{name:"全部",code:null,selected:!1},{name:"1-4线",code:"1-4",selected:!1},{name:"5-9线",code:"5-9",selected:!1},{name:"15-25线",code:"15-25",selected:!1},{name:"30-50线",code:"30-50",selected:!1},{name:"51-243线",code:"51-243",selected:!1}],providerList:[{name:"全部",code:null,selected:!1},{name:"PT",code:"PT",selected:!1},{name:"MG",code:"MG",selected:!1},{name:"AG",code:"AG",selected:!1},{name:"TTG",code:"TTG",selected:!1},{name:"PP",code:"PP",selected:!1},{name:"PNG",code:"PNG",selected:!1}],recordList:[]}},created:function(){var e=localStorage.getItem("gameSearchRecordList")||"[]";this.recordList=JSON.parse(e)},destroyed:function(){},methods:{selectedItem:function(e,a){null===e.code?this[a].forEach(function(e){null!==e.code&&(e.selected=!1)}):this[a][0].selected=!1,e.selected=!e.selected},submit:function(){var e=this.lineList.filter(function(e){return e.selected}).map(function(e){return e.code}),a=this.providerList.filter(function(e){return e.selected}).map(function(e){return e.code});this.lineList[0].selected&&(e=null),this.providerList[0].selected&&(a=null),this.$emit("update:showSearch",!1),this.$emit("filterGames",{lineList:e,providerList:a,search:this.search}),this.search&&this.search!==this.recordList[0]&&this.recordList.unshift(this.search),localStorage.setItem("gameSearchRecordList",JSON.stringify(this.recordList.slice(0,3)))}}}),r=(t("a02b"),t("2877")),o=Object(r.a)(n,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search page"},[s("div",{staticClass:"search__header"},[s("div",{staticClass:"search__input-wrapper"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.search,expression:"search",modifiers:{trim:!0}}],staticClass:"search__input",attrs:{type:"text",placeholder:"请输入关键字..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value.trim())},blur:function(){return t.$forceUpdate()}}})])]),s("a",{staticClass:"search__cancel",attrs:{href:"javascript:void (0);"},on:{click:function(){return t.$emit("update:showSearch",!1)}}},[t._v("取消")])]),s("div",{staticClass:"search__content"},[s("h6",{staticClass:"search__title"},[t._v("游戏平台")]),s("ul",{staticClass:"search__list clearfix"},t._l(t.providerList,function(e,a){return s("li",{key:a,staticClass:"search__item",class:{active:e.selected},on:{click:function(){return t.selectedItem(e,"providerList")}}},[t._v(" "+t._s(e.name)+" ")])}),0),s("h6",{staticClass:"search__title"},[t._v("赔付线")]),s("ul",{staticClass:"search__list clearfix"},t._l(t.lineList,function(e,a){return s("li",{key:a,staticClass:"search__item",class:{active:e.selected},on:{click:function(){return t.selectedItem(e,"lineList")}}},[t._v(" "+t._s(e.name)+" ")])}),0),s("ul",{staticClass:"search__record"},t._l(t.recordList,function(e,a){return s("li",{key:a,staticClass:"search__record-item border-bottom",on:{click:function(){t.search=e}}},[s("span",[t._v(t._s(e))]),s("i",{staticClass:"search__icon-record",on:{click:function(e){return e.stopPropagation(),t.recordList.splice(a,1)}}})])}),0),s("button",{staticClass:"search__button button",on:{click:t.submit}},[t._v("确定")])])])},[],!1,null,"4b54cd69",null).exports,l=t("ca00"),m=t("06de"),d=t("5880"),h={name:"games",components:{Header:i.a,Banner:c.a,searchGame:o},data:function(){return{tabs:[{name:"全部"},{name:"热门",params:{isHot:!0}},{name:"彩金池",params:{isPool:!0}},{name:"最新游戏",params:{isNew:!0}},{name:"我的收藏",params:{isFavorite:!0}}],activeTabIndex:0,tabFixed:!1,gameList:[],pageParams:{page:1,pageSize:10},filterParams:{},pageData:{},isLoadAll:!1,showSearch:!1}},computed:Object(s.a)({},Object(d.mapState)(["gameStatus"]),{},Object(d.mapGetters)(["loginStatus"]),{wmsImgPath:function(){var e=window.dynamicConfig.wmsServer,a=window.dynamicConfig.cdnPath,t=window.dynamicConfig.wmsPath;return"".concat(e+a,"/_wms/img/").concat(t,"/electronicgames/")},activeTab:function(){return this.tabs[this.activeTabIndex]}}),activated:function(){var e=this;this.tabFixed=!1,this.gameList.length||this.$loading.open("loadGames"),this.getGames().then(function(){e.$loading.hide("loadGames")}).catch(function(){e.$loading.hide("loadGames")})},deactivated:function(){this.isLoadAll=!1,this.activeTabIndex=0,this.pageParams={page:1,pageSize:10},this.$loading.hide("loadGames")},methods:{getGames:function(){var a=this,e=window.dynamicConfig.wmsServer,t=window.dynamicConfig.wmsPath,s=window.dynamicConfig.cdnPath,i="".concat(e+s,"/_wms/js/").concat(t,"/electronicgames/games.js");return Object(m.a)(i).then(function(e){a.gameList=e,a.pageData=Object(m.b)(a.gameList,a.pageParams)})},getPageData:function(){this.pageData=Object(m.b)(this.gameList,Object(s.a)({},this.pageParams,{},this.filterParams,{},this.activeTab.params))},filterGames:function(e){this.$refs.container.scrollIntoView(),this.pageParams={page:1,pageSize:10},this.filterParams=e,this.getPageData()},getGameStatus:function(e){return this.gameStatus[e]&&0===this.gameStatus[e].flag},toggleTab:function(e){var t=this,a=this.$refs.container.scrollTop;this.activeTabIndex=e,Object(l.a)(a,0,2,function(e,a){t.$refs.container.scrollTo(0,e),a&&(t.pageParams.page=1,t.filterParams={},t.getPageData())})},scroll:function(e){var a=e.target.scrollTop,t=e.target.scrollHeight-(a+e.target.clientHeight);this._scrollTop<a&&t<100&&this.loadNextPage(),this.tabFixed=a>this.$refs.tab.offsetTop,this._scrollTop=a},loadNextPage:function(){var e=this;this.pageParams.page<this.pageData.maxPage?(this.pageParams.page++,this.getPageData()):this.isLoadAll||(this.isLoadAll=!0,this.$toast({type:"error",message:"已经到底了~",callback:function(){e.isLoadAll=!1}}))}}},g=(t("f2e9"),Object(r.a)(h,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"games page"},[s("Header",{scopedSlots:t._u([{key:"right",fn:function(){return[s("button",{staticClass:"games__search header__button",on:{click:function(){t.showSearch=!0}}},[s("i",{staticClass:"games__icon-search"}),t._v("搜游戏 ")])]},proxy:!0}])}),s("div",{ref:"container",staticClass:"container",on:{scroll:t.scroll}},[s("banner",{attrs:{field:"game_new"}}),s("div",{ref:"tab",staticClass:"games__tab"},[s("ul",{staticClass:"games__tab-list border-bottom",class:{fixed:t.tabFixed},on:{touchmove:function(e){e.preventDefault()}}},t._l(t.tabs,function(e,a){return s("li",{key:a,staticClass:"games__tab-item",class:{active:t.activeTabIndex===a},on:{click:function(){return t.toggleTab(a)}}},[t._v(" "+t._s(e.name)+" ")])}),0)]),s("ul",{staticClass:"games__list clearfix"},[t._l(t.pageData.data,function(e,a){return s("li",{key:a,staticClass:"games__item"},[s("a",{staticClass:"games__img-wrapper default-bg-small",attrs:{href:"javascript:void (0);"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.wmsImgPath+e.imgUrl,expression:"wmsImgPath+item.imgUrl"}],staticClass:"games__img",attrs:{alt:e.cnName}}),!t.loginStatus&&e.canTry?s("i",{staticClass:"home__icon-try"}):t._e(),s("i",{staticClass:"games__heart"}),s("p",{staticClass:"games__tag-wrapper"},[s("span",{staticClass:"games__tag games__tag--provider"},[t._v(t._s(e.provider))]),e.isPromo?s("span",{staticClass:"games__tag games__tag--promo"},[t._v("特惠")]):t._e(),e.line?s("span",{staticClass:"games__tag games__tag--line"},[t._v(t._s(e.line)+"线")]):t._e(),e.isPool?s("span",{staticClass:"games__tag games__tag--jackpot"},[t._v("彩金")]):t._e()]),t.getGameStatus(e.gameCode)?s("div",{staticClass:"maintain-mask"},[t._m(0,!0)]):t._e()]),s("p",{staticClass:"games__name"},[t._v(t._s(e.cnName))])])}),t.pageData.data&&t.pageData.data.length?t._e():s("li",{staticClass:"games__no-data-tips"},[t._v("很抱歉,没有找到与之相关的游戏~")])],2)],1),t.showSearch?s("searchGame",{attrs:{showSearch:t.showSearch},on:{filterGames:t.filterGames,"update:showSearch":function(e){t.showSearch=e},"update:show-search":function(e){t.showSearch=e}}}):t._e()],1)},[function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"maintain-mask__inner"},[a("i",{staticClass:"maintain-mask__icon"}),a("p",{staticClass:"maintain-mask__text"},[this._v("维护中")])])}],!1,null,"baa135e0",null));a.default=g.exports},6522:function(){},a02b:function(e,a,t){var s=t("c125");t.n(s).a},c125:function(){},f2e9:function(e,a,t){var s=t("6522");t.n(s).a}}]);