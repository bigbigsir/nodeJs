{"version":3,"sources":["components/header/HeaderPromo.js"],"names":["cx","classNames","bind","scss","HeaderPromo","history","useHistory","dispatch","useDispatch","loginName","useSelector","state","customer","getLogout","api","logout","then","head","body","errCode","setSignOut","info","className","onClick","push","dialog","title","text","buttons","type","callback","href","toggleLoginDialog"],"mappings":"oGAAA,iHAWMA,EAAKC,IAAWC,KAAKC,KAgEZC,UA9Df,WACE,IAAMC,EAAUC,uBACVC,EAAWC,cACXC,EAAYC,aAAY,SAAAC,GAAK,OAAIA,EAAMC,SAASH,aAEtD,SAASI,IACPC,IAAIC,SAASC,MAAK,YAAqB,IAAlBC,EAAiB,EAAjBA,KAAMC,EAAW,EAAXA,KACJ,SAAjBD,EAAKE,SACPZ,EAASa,YAAWF,EAAKG,UAoB/B,OACE,yBAAKC,UAAWtB,EAAG,SAAU,UAC3B,yBAAKsB,UAAWtB,EAAG,gBAAiB,uBAAwB,aAC1D,yBAAKsB,UAAWtB,EAAG,iBACjB,uBAAGuB,QAAS,kBAAMlB,EAAQmB,KAAK,UAAUF,UAAWtB,EAAG,iBACvD,0BAAMsB,UAAWtB,EAAG,4BACpB,kBAAC,IAAD,OAEF,yBAAKsB,UAAWtB,EAAG,kBAEfS,EACI,uBAAGa,UAAWtB,EAAG,qBACjB,yDAAWS,GACX,0BAAMa,UAAWtB,EAAG,sBAApB,KACA,uBAAGuB,QA7BjB,WACEE,YAAO,CACLC,MAAO,eACPC,KAAM,+GACNC,QAAS,CAAC,CACRC,KAAM,SACNF,KAAM,2BACNG,SAAUjB,GACT,CACDgB,KAAM,QACNF,KAAM,gCAmBuBL,UAAWtB,EAAG,eAAgB+B,KAAK,wBAAxD,iBAIA,uBAAGT,UAAWtB,EAAG,qBAAjB,qDAGHS,GAAa,4BAAQc,QAAS,kBAAMhB,EAASyB,aAAkB,KAC9DV,UAAWtB,EAAG,gBAAiB,YADnB,iBAIbS,GAAa,4BAAQa,UAAWtB,EAAG,gBAAiB,YAAvC,gBAEhB,4BAAQuB,QAAS,kBAAMlB,EAAQmB,KAAK,UAAUF,UAAWtB,EAAG,gBAAiB,SAA7E","file":"cdn/A02F/static/js/6.643fdf76.chunk.js","sourcesContent":["import React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { useHistory } from 'react-router'\nimport classNames from 'classnames/bind'\nimport api from '@/api/api.js'\nimport Partners from '@/components/header/Partners'\nimport { setSignOut } from '@/store/actions/sign.js'\nimport { dialog } from '@/components/dialog/Dialog.js'\nimport { toggleLoginDialog } from '@/store/actions/common'\nimport scss from './header.module.scss'\n\nconst cx = classNames.bind(scss)\n\nfunction HeaderPromo() {\n  const history = useHistory()\n  const dispatch = useDispatch()\n  const loginName = useSelector(state => state.customer.loginName)\n\n  function getLogout() {\n    api.logout().then(({ head, body }) => {\n      if (head.errCode === '0000') {\n        dispatch(setSignOut(body.info))\n      }\n    })\n  }\n\n  function signOut() {\n    dialog({\n      title: '提示',\n      text: '尊敬的贵宾，您确定要退出当前账号吗？',\n      buttons: [{\n        type: 'hollow',\n        text: '确定退出',\n        callback: getLogout\n      }, {\n        type: 'solid',\n        text: '再玩一会'\n      }]\n    })\n  }\n\n  return (\n    <div className={cx('header', 'promo')}>\n      <div className={cx('header__inner', 'header__inner--promo', 'clearfix')}>\n        <div className={cx('header__left')}>\n          <i onClick={() => history.push('/home')} className={cx('promo__logo')}/>\n          <span className={cx('promo__logo-split-line')}/>\n          <Partners/>\n        </div>\n        <div className={cx('header__right')}>\n          {\n            loginName\n              ? <p className={cx('promo__greetings')}>\n                <span>欢迎您，{loginName}</span>\n                <span className={cx('promo__split-line')}>|</span>\n                <a onClick={signOut} className={cx('promo__link')} href=\"javascript:void (0);\">\n                  退出\n                </a>\n              </p>\n              : <p className={cx('promo__greetings')}>欢迎您，请先登录</p>\n          }\n          {\n            !loginName && <button onClick={() => dispatch(toggleLoginDialog(true))}\n              className={cx('promo__button', 'sign-in')}>登录</button>\n          }\n          {\n            !loginName && <button className={cx('promo__button', 'sign-up')}>注册</button>\n          }\n          <button onClick={() => history.push('/home')} className={cx('promo__button', 'back')}>返回首页</button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default HeaderPromo\n"],"sourceRoot":""}