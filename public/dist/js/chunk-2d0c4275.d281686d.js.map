{"version":3,"sources":["webpack:///./src/views/modules/user/addOrUpdate.vue?900a","webpack:///src/views/modules/user/addOrUpdate.vue","webpack:///./src/views/modules/user/addOrUpdate.vue?bce4","webpack:///./src/views/modules/user/addOrUpdate.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_b","attrs","visible","title","formData","id","$t","custom-class","close-on-click-modal","close-on-press-escape","on","opened","dialogOpen","closed","dialogClose","update:visible","$event","$attrs","directives","name","rawName","value","expression","ref","model","rules","formRules","validate-on-rule-change","label-width","nativeOn","keyup","type","indexOf","_k","keyCode","key","submitHandle","prop","label","placeholder","readonly","maxlength","callback","$$v","$set","trim","_e","isChangePassword","_v","_s","class","margin-b-0","staticClass","slot","click","staticRenderFns","addOrUpdatevue_type_script_lang_js_","props","Boolean","default","data","imageUrl","submitLoading","username","originalPassword","password","confirmPassword","realName","gender","email","mobile","status","computed","onlyUsername","validator","trigger","$rules","concat","methods","_this","Object","objectSpread","$store","state","userInfo","url","params","$http","get","then","_ref","ok","msg","$message","error","$refs","form","resetFields","rule","_this2","post","_ref2","catch","e","encrypt","plaintext","crypto","jsencrypt_default","a","setPublicKey","debounce_default","_this3","validate","valid","formatParam","leading","trailing","_this4","submitForm","_ref3","promise_default","reject","_this5","_ref4","info","confirmConfig","showClose","confirmButtonText","js_cookie_default","remove","$nextTick","$alert","$router","push","message","duration","onClose","$emit","user_addOrUpdatevue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d0c4275.d281686d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',_vm._b({attrs:{\"visible\":_vm.visible,\"title\":_vm.formData.id ? _vm.$t('update') :_vm.$t('add'),\"custom-class\":\"user-dialog min-w-600px\",\"close-on-click-modal\":false,\"close-on-press-escape\":false},on:{\"opened\":_vm.dialogOpen,\"closed\":_vm.dialogClose,\"update:visible\":function($event){_vm.visible=$event}}},'el-dialog',_vm.$attrs,false),[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.submitLoading),expression:\"submitLoading\"}],ref:\"form\",attrs:{\"model\":_vm.formData,\"rules\":_vm.formRules,\"validate-on-rule-change\":false,\"label-width\":\"auto\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submitHandle()}}},[_c('el-form-item',{attrs:{\"prop\":\"username\",\"label\":_vm.$t('module.username')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('module.username'),\"readonly\":!!_vm.formData.id,\"maxlength\":\"30\"},model:{value:(_vm.formData.username),callback:function ($$v) {_vm.$set(_vm.formData, \"username\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.username\"}})],1),(_vm.isChangePassword)?_c('el-form-item',{attrs:{\"prop\":\"originalPassword\",\"label\":_vm.$t('module.originalPassword')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('module.originalPassword'),\"maxlength\":\"30\"},model:{value:(_vm.formData.originalPassword),callback:function ($$v) {_vm.$set(_vm.formData, \"originalPassword\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.originalPassword\"}})],1):_vm._e(),(_vm.isChangePassword||!_vm.formData.id)?_c('el-form-item',{attrs:{\"prop\":\"password\",\"label\":_vm.$t('module.password')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('module.password'),\"maxlength\":\"30\"},model:{value:(_vm.formData.password),callback:function ($$v) {_vm.$set(_vm.formData, \"password\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.password\"}})],1):_vm._e(),(_vm.isChangePassword||!_vm.formData.id)?_c('el-form-item',{attrs:{\"prop\":\"confirmPassword\",\"label\":_vm.$t('module.confirmPassword')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('module.confirmPassword'),\"maxlength\":\"30\"},model:{value:(_vm.formData.confirmPassword),callback:function ($$v) {_vm.$set(_vm.formData, \"confirmPassword\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.confirmPassword\"}})],1):_vm._e(),_c('el-form-item',{attrs:{\"prop\":\"realName\",\"label\":_vm.$t('module.realName')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('module.realName'),\"maxlength\":\"30\"},model:{value:(_vm.formData.realName),callback:function ($$v) {_vm.$set(_vm.formData, \"realName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.realName\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"gender\",\"label\":_vm.$t('module.gender')}},[_c('el-radio',{attrs:{\"label\":\"1\"},model:{value:(_vm.formData.gender),callback:function ($$v) {_vm.$set(_vm.formData, \"gender\", $$v)},expression:\"formData.gender\"}},[_vm._v(_vm._s(_vm.$t('gender.gender_1')))]),_c('el-radio',{attrs:{\"label\":\"2\"},model:{value:(_vm.formData.gender),callback:function ($$v) {_vm.$set(_vm.formData, \"gender\", $$v)},expression:\"formData.gender\"}},[_vm._v(_vm._s(_vm.$t('gender.gender_2')))]),_c('el-radio',{attrs:{\"label\":\"0\"},model:{value:(_vm.formData.gender),callback:function ($$v) {_vm.$set(_vm.formData, \"gender\", $$v)},expression:\"formData.gender\"}},[_vm._v(_vm._s(_vm.$t('gender.gender_0')))])],1),_c('el-form-item',{attrs:{\"prop\":\"email\",\"label\":_vm.$t('module.email')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('module.email'),\"maxlength\":\"30\"},model:{value:(_vm.formData.email),callback:function ($$v) {_vm.$set(_vm.formData, \"email\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.email\"}})],1),_c('el-form-item',{class:{'margin-b-0':_vm.isChangePassword},attrs:{\"prop\":\"mobile\",\"label\":_vm.$t('module.mobile')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('module.mobile'),\"maxlength\":\"30\"},model:{value:(_vm.formData.mobile),callback:function ($$v) {_vm.$set(_vm.formData, \"mobile\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.mobile\"}})],1),(!_vm.isChangePassword)?_c('el-form-item',{staticClass:\"margin-b-0\",attrs:{\"prop\":\"status\",\"label\":_vm.$t('module.status')}},[_c('el-radio',{attrs:{\"label\":\"1\"},model:{value:(_vm.formData.status),callback:function ($$v) {_vm.$set(_vm.formData, \"status\", $$v)},expression:\"formData.status\"}},[_vm._v(_vm._s(_vm.$t('module.enable')))]),_c('el-radio',{attrs:{\"label\":\"0\"},model:{value:(_vm.formData.status),callback:function ($$v) {_vm.$set(_vm.formData, \"status\", $$v)},expression:\"formData.status\"}},[_vm._v(_vm._s(_vm.$t('module.disable')))])],1):_vm._e()],1),_c('template',{slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(_vm._s(_vm.$t('cancel')))]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitHandle()}}},[_vm._v(_vm._s(_vm.$t('confirm')))])],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-dialog\r\n    v-bind=\"$attrs\"\r\n    @opened=\"dialogOpen\"\r\n    @closed=\"dialogClose\"\r\n    :visible.sync=\"visible\"\r\n    :title=\"formData.id ? $t('update') :$t('add')\"\r\n    custom-class=\"user-dialog min-w-600px\"\r\n    :close-on-click-modal=\"false\" :close-on-press-escape=\"false\">\r\n    <el-form :model=\"formData\" :rules=\"formRules\" ref=\"form\" @keyup.enter.native=\"submitHandle()\"\r\n             v-loading=\"submitLoading\" :validate-on-rule-change=\"false\" label-width=\"auto\">\r\n\r\n      <el-form-item prop=\"username\" :label=\"$t('module.username')\">\r\n        <el-input v-model.trim=\"formData.username\" :placeholder=\"$t('module.username')\" :readonly=\"!!formData.id\"\r\n                  maxlength=\"30\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"originalPassword\" :label=\"$t('module.originalPassword')\" v-if=\"isChangePassword\">\r\n        <el-input v-model.trim=\"formData.originalPassword\" :placeholder=\"$t('module.originalPassword')\"\r\n                  maxlength=\"30\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"password\" :label=\"$t('module.password')\"\r\n                    v-if=\"isChangePassword||!formData.id\">\r\n        <el-input v-model.trim=\"formData.password\" :placeholder=\"$t('module.password')\" maxlength=\"30\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"confirmPassword\" :label=\"$t('module.confirmPassword')\"\r\n                    v-if=\"isChangePassword||!formData.id\">\r\n        <el-input v-model.trim=\"formData.confirmPassword\" :placeholder=\"$t('module.confirmPassword')\"\r\n                  maxlength=\"30\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"realName\" :label=\"$t('module.realName')\">\r\n        <el-input v-model.trim=\"formData.realName\" :placeholder=\"$t('module.realName')\" maxlength=\"30\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"gender\" :label=\"$t('module.gender')\">\r\n        <el-radio v-model=\"formData.gender\" label=\"1\">{{$t('gender.gender_1')}}</el-radio>\r\n        <el-radio v-model=\"formData.gender\" label=\"2\">{{$t('gender.gender_2')}}</el-radio>\r\n        <el-radio v-model=\"formData.gender\" label=\"0\">{{$t('gender.gender_0')}}</el-radio>\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"email\" :label=\"$t('module.email')\">\r\n        <el-input v-model.trim=\"formData.email\" :placeholder=\"$t('module.email')\" maxlength=\"30\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"mobile\" :label=\"$t('module.mobile')\" :class=\"{'margin-b-0':isChangePassword}\">\r\n        <el-input v-model.trim=\"formData.mobile\" :placeholder=\"$t('module.mobile')\" maxlength=\"30\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"status\" :label=\"$t('module.status')\" v-if=\"!isChangePassword\" class=\"margin-b-0\">\r\n        <el-radio v-model=\"formData.status\" label=\"1\">{{$t('module.enable')}}</el-radio>\r\n        <el-radio v-model=\"formData.status\" label=\"0\">{{$t('module.disable')}}</el-radio>\r\n      </el-form-item>\r\n\r\n    </el-form>\r\n    <template slot=\"footer\">\r\n      <el-button @click=\"visible = false\" type=\"text\">{{ $t('cancel') }}</el-button>\r\n      <el-button @click=\"submitHandle()\" type=\"primary\">{{ $t('confirm') }}</el-button>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\n  /**\r\n   * Created by bigBigSir on 2019/4/5\r\n   */\r\n  import cookies from 'js-cookie'\r\n  import JSEncrypt from 'jsencrypt'\r\n  import debounce from 'lodash/debounce'\r\n\r\n  export default {\r\n    name: 'addOrUpdate',\r\n    props: {\r\n      isChangePassword: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n    data () {\r\n      return {\r\n        imageUrl: null,\r\n        visible: false,\r\n        submitLoading: false,\r\n        formData: {\r\n          id: null,\r\n          username: null,\r\n          originalPassword: null,\r\n          password: null,\r\n          confirmPassword: null,\r\n          realName: null,\r\n          gender: '1',\r\n          email: null,\r\n          mobile: null,\r\n          status: '1'\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      formRules () {\r\n        let onlyUsername = {\r\n          validator: this.onlyUsername,\r\n          trigger: 'blur'\r\n        }\r\n        return {\r\n          username: this.$rules([{ type: 'required' }, { type: 'username' }]).concat(this.formData.id ? [] : [onlyUsername]),\r\n          originalPassword: this.$rules([{ type: 'required' }, { type: 'password' }]),\r\n          password: this.$rules([{ type: 'required' }, { type: 'password' }]),\r\n          confirmPassword: this.$rules([{ type: 'required' }, { type: 'confirmPassword' }]),\r\n          realName: this.$rules([{ type: 'required' }]),\r\n          gender: this.$rules({ type: 'required' }),\r\n          email: this.$rules([{ type: 'required' }, { type: 'email' }]),\r\n          mobile: this.$rules([{ type: 'required' }, { type: 'mobile' }]),\r\n          status: this.$rules({ type: 'required' })\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      // dialog打开回调\r\n      dialogOpen () {\r\n        if (this.isChangePassword) {\r\n          this.formData = { ...this.$store.state.userInfo }\r\n        } else if (this.formData.id) {\r\n          let url = '/api/user/findOne'\r\n          let params = { id: this.formData.id }\r\n          this.$http.get(url, params).then(({ ok, data, msg }) => {\r\n            if (ok) {\r\n              delete data['createTime']\r\n              this.formData = { ...this.formData, ...data }\r\n            } else {\r\n              this.$message.error(msg)\r\n            }\r\n          })\r\n        }\r\n      },\r\n      // dialog关闭回调\r\n      dialogClose () {\r\n        this.$refs.form.resetFields()\r\n      },\r\n      // 验证username唯一\r\n      onlyUsername (rule, value, callback) {\r\n        this.$http.post('/api/user/findOne', { username: value }).then(({ ok, data }) => {\r\n          if (ok && !data) {\r\n            callback()\r\n          } else {\r\n            callback(this.$t('validate.onlyUsername'))\r\n          }\r\n        }).catch(e => e)\r\n      },\r\n      // 加密密码\r\n      encrypt (key, plaintext) {\r\n        let crypto = new JSEncrypt()\r\n        crypto.setPublicKey(key)\r\n        return crypto.encrypt(plaintext)\r\n      },\r\n      // 提交事件\r\n      submitHandle: debounce(function () {\r\n        this.$refs.form.validate((valid) => {\r\n          if (valid) {\r\n            let params = { ...this.formData }\r\n            delete params.confirmPassword\r\n            delete params.originalPassword\r\n            this.submitLoading = true\r\n            this.formatParam(params).catch((msg) => {\r\n              this.$message.error(msg)\r\n              this.submitLoading = false\r\n            })\r\n          }\r\n        })\r\n      }, 1000, { 'leading': true, 'trailing': false }),\r\n      // 格式化参数\r\n      formatParam (params) {\r\n        let url\r\n        if (this.formData.id && !this.isChangePassword) { // 修改用户信息\r\n          url = '/api/user/updateOne'\r\n          delete params.password\r\n          return this.submitForm(url, params)\r\n        }\r\n        return this.$http.get('/util/getPublicKey').then(({ ok, key, msg }) => {\r\n          if (ok && key) {\r\n            params.password = this.encrypt(key, params.password)\r\n            if (this.isChangePassword) { // 修改密码，用户信息\r\n              url = '/user/changePassword'\r\n              params.originalPassword = this.encrypt(key, this.formData.originalPassword)\r\n            } else { // 添加用户\r\n              url = '/user/signUp'\r\n            }\r\n            return this.submitForm(url, params)\r\n          } else {\r\n            return Promise.reject(msg)\r\n          }\r\n        })\r\n      },\r\n      // 提交表单\r\n      submitForm (url, params) {\r\n        return this.$http.post(url, params).then(({ ok, msg }) => {\r\n          this.submitLoading = false\r\n          if (ok) {\r\n            if (this.isChangePassword) {\r\n              return this.$http.get('/user/signOut').then(() => {\r\n                let title = this.$t('prompt.title')\r\n                let info = this.$t('prompt.success') + ',' + this.$t('prompt.restartLogin')\r\n                let confirmConfig = {\r\n                  type: 'success',\r\n                  showClose: false,\r\n                  confirmButtonText: this.$t('confirm')\r\n                }\r\n                cookies.remove('token')\r\n                this.$nextTick(() => {\r\n                  this.visible = false\r\n                })\r\n                return this.$alert(info, title, confirmConfig)\r\n              }).then(() => {\r\n                this.$router.push('login')\r\n              })\r\n            }\r\n            this.$message({\r\n              message: this.$t('prompt.success'),\r\n              type: 'success',\r\n              duration: 500,\r\n              onClose: () => {\r\n                this.visible = false\r\n                this.$emit('refreshList')\r\n              }\r\n            })\r\n          } else {\r\n            return Promise.reject(msg)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addOrUpdate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addOrUpdate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addOrUpdate.vue?vue&type=template&id=0cff7c05&\"\nimport script from \"./addOrUpdate.vue?vue&type=script&lang=js&\"\nexport * from \"./addOrUpdate.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}