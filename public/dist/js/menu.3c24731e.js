(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["menu","chunk-794a4e26","chunk-2d22a183"],{2036:function(t,e,n){},"27ae":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-table-column",t._b({attrs:{prop:t.prop},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{class:e.row[t.childKey].length?"parent-node":"child-node",style:{"padding-left":13*(e.row._level||0)+"px"},on:{click:function(n){return n.preventDefault(),t.toggleHandle(e.$index,e.row)}}},[n("i",{class:e.row._expanded?"el-icon-caret-bottom":"el-icon-caret-right"}),t._v("\n      "+t._s(e.row[t.prop])+"\n    ")])]}}])},"el-table-column",t.$attrs,!1))},i=[],r=(n("ac6a"),n("75fc")),o=n("a745"),s=n.n(o),l={name:"TableTreeColumn",props:{menuData:{type:Array,default:function(){return[]}},prop:{type:String},treeKey:{type:String,default:"id"},parentKey:{type:String,default:"parentId"},childKey:{type:String,default:"children"}},methods:{hasChild:function(t){return s()(t[this.childKey])&&t[this.childKey].length},toggleHandle:function(t,e){if(!this.hasChild(e))return!1;var n=Object(r["a"])(this.menuData);n[t]._expanded=!n[t]._expanded,n[t]._expanded?(e[this.childKey].forEach(function(t){t._level=(e._level||0)+1,t._expanded=!1}),n=n.splice(0,t+1).concat(e[this.childKey]).concat(n)):n=this.removeChildNode(n,e[this.treeKey]),this.$emit("updateMenuData",n)},removeChildNode:function(t,e){var n=[];if(e=s()(e)?e:[e],!e.length)return t;for(var a=t.length;a--;)~e.indexOf(t[a][this.parentKey])&&!~e.indexOf(t[a][this.treeKey])&&n.push(t.splice(a,1)[0][this.treeKey]);return this.removeChildNode(t,n)}}},u=l,c=(n("9587"),n("2877")),d=Object(c["a"])(u,a,i,!1,null,"1669d40a",null);e["default"]=d.exports},"29f5":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addOrUpdateHandle(null)}}},[n("svg-icon",{attrs:{icon:"plus"}}),t._v("\n      "+t._s(t.$t("add"))+"\n    ")],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.getDataLoading,expression:"getDataLoading"}],attrs:{data:t.menuData,border:""}},[n("table-tree-column",{attrs:{label:t.$t("menu.name"),prop:"label",menuData:t.menuData,childKey:t.childKey,"min-width":"150px"},on:{updateMenuData:t.updateMenuData}}),n("el-table-column",{attrs:{label:t.$t("menu.icon"),prop:"icon",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("svg-icon",{attrs:{icon:t.row.icon}})]}}])}),n("el-table-column",{attrs:{label:t.$t("menu.routePath"),prop:"routerPath",align:"center"}}),n("el-table-column",{attrs:{label:t.$t("menu.resourceUrl"),prop:"resourceUrl","min-width":"150px",align:"center"}}),n("el-table-column",{attrs:{label:t.$t("menu.openMode"),prop:"openMode",align:"center",width:"150"}}),n("el-table-column",{attrs:{label:t.$t("menu.sort"),prop:"sort",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input-number",{attrs:{min:1,max:100,size:"small"},on:{change:function(n){return t.updateSort("id",e.row.id,"sort",e.row.sort)}},model:{value:e.row.sort,callback:function(n){t.$set(e.row,"sort",n)},expression:"scope.row.sort"}})]}}])}),n("el-table-column",{attrs:{label:t.$t("handle"),fixed:"right",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticClass:"pd0",attrs:{type:"text"},on:{click:function(n){return t.addOrUpdateHandle(e.row.id)}}},[t._v(t._s(t.$t("update")))]),n("el-button",{staticClass:"pd0",attrs:{type:"text"},on:{click:function(n){return t.deleteMenu(e.row)}}},[t._v(t._s(t.$t("delete")))])]}}])})],1),t.isRenderDialog?n("addOrUpdate",{ref:"addOrUpdate",attrs:{menuData:t.copyMenuData},on:{refreshList:t.getListData}}):t._e()],1)},i=[],r=(n("ac6a"),n("f499")),o=n.n(r),s=n("1106"),l=n("dff1"),u=n("27ae"),c={name:"sys_menu",mixins:[l["default"]],components:{TableTreeColumn:u["default"],addOrUpdate:s["default"]},data:function(){return{childKey:"child",menuData:[],copyMenuData:[],mixinConfig:{getListDataURL:"/api/menu/tree",deleteURL:"/api/menu/remove",updateSortURL:"/api/menu/updateOne"}}},created:function(){console.log("sys_menu")},methods:{getListDataAfter:function(t){function e(t){var n=this;t.forEach(function(t){t[n.childKey]=t.children,delete t.children,t[n.childKey].length&&e.call(n,t[n.childKey])})}this.copyMenuData=JSON.parse(o()(t)),e.call(this,t),this.menuData=t},updateMenuData:function(t){this.menuData=t},deleteMenu:function(t){var e=this.recursionPushId(t);this.deleteHandle(e)},recursionPushId:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n.push(t.id),t.children&&t.children.length&&t.children.forEach(function(t){return e.recursionPushId(t,n)}),n}}},d=c,h=n("2877"),p=Object(h["a"])(d,a,i,!1,null,null,null);e["default"]=p.exports},9587:function(t,e,n){"use strict";var a=n("2036"),i=n.n(a);i.a},a21f:function(t,e,n){var a=n("584a"),i=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},dff1:function(t,e,n){"use strict";n.r(e);var a=n("bd86"),i=n("795b"),r=n.n(i),o=n("cebc");function s(){var t=this;this.$message({message:this.$t("prompt.success"),type:"success",duration:1e3,showClose:!0,onClose:function(){t.getListData()}})}var l={data:function(){return{mixinConfig:{activatedAutoRequest:!0,getListDataURL:null,getListDataIsPage:!1,deleteURL:null,isBatchDelete:!1,batchDeleteKey:"id",getDetailsURL:null,updateStatusURL:null,updateSortURL:null,exportURL:null},listData:[],queryParams:{},page:1,pageSize:10,total:0,order:null,orderField:null,getDataLoading:!1,isRenderDialog:!1,listSelections:[]}},created:function(){this.mixinConfig.activatedAutoRequest&&this.getListData()},methods:{getListData:function(){var t=this,e=this.mixinConfig.getListDataURL,n=Object(o["a"])({order:this.order,orderField:this.orderField,page:this.mixinConfig.getListDataIsPage?this.page:null,pageSize:this.mixinConfig.getListDataIsPage?this.pageSize:null},this.queryParams);if(e){for(var a in this.getDataLoading=!0,n)n[a]||delete n[a];return this.$http.get(e,n).then(function(e){var n=e.ok,a=e.data,i=e.msg;return t.getDataLoading=!1,n?(t.listData=t.mixinConfig.getListDataIsPage&&a.rows?a.rows:a,t.total=t.mixinConfig.getListDataIsPage?a.total:0,t.getListDataAfter(t.listData),a):(t.$message.error(i),r.a.reject(i))}).catch(function(){t.getDataLoading=!1})}},selectionChangeHandle:function(t){this.listSelections=t},handlePageSizeChange:function(t){this.page=this.total/t>=this.page?this.page:0,this.pageSize=t,this.getListData()},handleCurrentPageChange:function(t){this.page=t,this.getListData()},addOrUpdateHandle:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isRenderDialog=!0,this.$nextTick(function(){t.$refs.addOrUpdate.visible=!0,t.$refs.addOrUpdate.formData.id=e})},deleteHandle:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",i=this.$t("prompt.title"),o=this.$t("prompt.info",{handle:this.$t("delete")}),l={confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel"),type:"warning"},u=this.mixinConfig.deleteURL;if(u)return e||!this.mixinConfig.isBatchDelete||this.listSelections.length?(e=!e&&this.mixinConfig.isBatchDelete?this.listSelections.map(function(e){return e[t.mixinConfig.batchDeleteKey]}):e,this.$confirm(o,i,l).then(function(){return t.$http.delete(u,Object(a["a"])({},n,e)).then(function(e){var n=e.ok,a=e.msg,i=void 0===a?"error":a;return n?(s.call(t),!0):(t.$message.error(i),r.a.reject(i))})}).catch(function(){return!1})):this.$message({message:this.$t("prompt.deleteSelect"),type:"warning",duration:1e3})},updateStatus:function(t,e,n,i){var o,l=this,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"put",c=this.$t("prompt.title"),d=this.$t("prompt.info",{handle:this.$t("update")}),h={confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel"),type:"warning"},p=this.mixinConfig.updateStatusURL,f=(o={},Object(a["a"])(o,t,e),Object(a["a"])(o,n,i),o);if(p)return this.$confirm(d,c,h).then(function(){return l.$http[u](p,f).then(function(t){var e=t.ok,n=t.msg,a=void 0===n?"error":n;return e?(s.call(l),!0):(l.$message.error(a),r.a.reject(a))})}).catch(function(){return l.getListData(),!1})},updateSort:function(t,e,n,i){var o,l=this,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"put",c=this.mixinConfig.updateSortURL,d=(o={},Object(a["a"])(o,t,e),Object(a["a"])(o,n,i),o);if(c)return this.$http[u](c,d).then(function(t){var e=t.ok,n=t.msg,a=void 0===n?"error":n;return e?(s.call(l),!0):(l.$message.error(a),r.a.reject(a))}).catch(function(){return l.getListData(),!1})},sortChangeHandle:function(t){"asc"===this.order&&"desc"===this.order&&this.orderField&&this.getListData()},getListDataAfter:function(){return null}}};e["default"]=l},f499:function(t,e,n){t.exports=n("a21f")}}]);
//# sourceMappingURL=menu.3c24731e.js.map