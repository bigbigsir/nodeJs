(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d22a183"],{dff1:function(t,e,i){"use strict";i.r(e);var a=i("bd86"),n=i("795b"),s=i.n(n),r=i("cebc");function o(){var t=this;this.$message({message:this.$t("prompt.success"),type:"success",duration:1e3,showClose:!0,onClose:function(){t.getListData()}})}var h={data:function(){return{mixinConfig:{activatedAutoRequest:!0,getListDataURL:null,getListDataIsPage:!1,deleteURL:null,isBatchDelete:!1,batchDeleteKey:"id",getDetailsURL:null,updateStatusURL:null,updateSortURL:null,exportURL:null},listData:[],queryParams:{},page:1,pageSize:10,total:0,order:null,orderField:null,getDataLoading:!1,isRenderDialog:!1,listSelections:[]}},created:function(){this.mixinConfig.activatedAutoRequest&&this.getListData()},methods:{getListData:function(){var t=this,e=this.mixinConfig.getListDataURL,i=Object(r.a)({order:this.order,orderField:this.orderField,page:this.mixinConfig.getListDataIsPage?this.page:null,pageSize:this.mixinConfig.getListDataIsPage?this.pageSize:null},this.queryParams);if(e){for(var a in this.getDataLoading=!0,i)i[a]||delete i[a];return this.$http.get(e,i).then(function(e){var i=e.ok,a=e.data,n=e.msg;return t.getDataLoading=!1,i?(t.listData=t.mixinConfig.getListDataIsPage&&a.rows?a.rows:a,t.total=t.mixinConfig.getListDataIsPage?a.total:0,t.getListDataAfter(t.listData),a):(t.$message.error(n),s.a.reject(n))}).catch(function(){t.getDataLoading=!1})}},selectionChangeHandle:function(t){this.listSelections=t},handlePageSizeChange:function(t){this.page=this.total/t>=this.page?this.page:0,this.pageSize=t,this.getListData()},handleCurrentPageChange:function(t){this.page=t,this.getListData()},addOrUpdateHandle:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.isRenderDialog=!0,this.$nextTick(function(){t.$refs.addOrUpdate.visible=!0,t.$refs.addOrUpdate.formData.id=e})},deleteHandle:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"id",n=this.$t("prompt.title"),r=this.$t("prompt.info",{handle:this.$t("delete")}),h={confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel"),type:"warning"},l=this.mixinConfig.deleteURL;if(l)return e||!this.mixinConfig.isBatchDelete||this.listSelections.length?(e=!e&&this.mixinConfig.isBatchDelete?this.listSelections.map(function(e){return e[t.mixinConfig.batchDeleteKey]}):e,this.$confirm(r,n,h).then(function(){return t.$http.delete(l,Object(a.a)({},i,e)).then(function(e){var i=e.ok,a=e.msg,n=void 0===a?"error":a;return i?(o.call(t),!0):(t.$message.error(n),s.a.reject(n))})}).catch(function(){return!1})):this.$message({message:this.$t("prompt.deleteSelect"),type:"warning",duration:1e3})},updateStatus:function(t,e,i,n){var r,h=this,l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"put",c=this.$t("prompt.title"),u=this.$t("prompt.info",{handle:this.$t("update")}),g={confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel"),type:"warning"},d=this.mixinConfig.updateStatusURL,f=(r={},Object(a.a)(r,t,e),Object(a.a)(r,i,n),r);if(d)return this.$confirm(u,c,g).then(function(){return h.$http[l](d,f).then(function(t){var e=t.ok,i=t.msg,a=void 0===i?"error":i;return e?(o.call(h),!0):(h.$message.error(a),s.a.reject(a))})}).catch(function(){return h.getListData(),!1})},updateSort:function(t,e,i,n){var r,h=this,l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"put",c=this.mixinConfig.updateSortURL,u=(r={},Object(a.a)(r,t,e),Object(a.a)(r,i,n),r);if(c)return this.$http[l](c,u).then(function(t){var e=t.ok,i=t.msg,a=void 0===i?"error":i;return e?(o.call(h),!0):(h.$message.error(a),s.a.reject(a))}).catch(function(){return h.getListData(),!1})},sortChangeHandle:function(t){"asc"===this.order&&"desc"===this.order&&this.orderField&&this.getListData()},getListDataAfter:function(){return null}}};e.default=h}}]);