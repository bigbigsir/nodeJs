(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0f384787","chunk-8bda8572","chunk-2d210bb9","chunk-2d21ee88","chunk-2d0c4275","chunk-2d21ad87","chunk-2d0d092a"],{"09fe":function(e,t,a){"use strict";var n=a("6944");a.n(n).a},"3a2c":function(e,t,a){"use strict";a.r(t);var n=a("795b"),r=a.n(n),s=a("cebc"),l=(a("cadf"),a("551c"),a("f751"),a("097d"),a("a78e")),o=a.n(l),i=a("720d"),c=a.n(i),u=a("b047"),d={name:"addOrUpdate",props:{isChangePassword:{type:Boolean,default:!1}},data:function(){return{imageUrl:null,visible:!1,submitLoading:!1,formData:{id:null,username:null,originalPassword:null,password:null,confirmPassword:null,realName:null,gender:"1",email:null,mobile:null,status:"1"}}},computed:{formRules:function(){var e={validator:this.onlyUsername,trigger:"blur"};return{username:this.$rules([{type:"required"},{type:"username"}]).concat(this.formData.id?[]:[e]),originalPassword:this.$rules([{type:"required"},{type:"password"}]),password:this.$rules([{type:"required"},{type:"password"}]),confirmPassword:this.$rules([{type:"required"},{type:"confirmPassword"}]),realName:this.$rules([{type:"required"}]),gender:this.$rules({type:"required"}),email:this.$rules([{type:"required"},{type:"email"}]),mobile:this.$rules([{type:"required"},{type:"mobile"}]),status:this.$rules({type:"required"})}}},methods:{dialogOpen:function(){var e=this;if(this.isChangePassword)this.formData=Object(s.a)({},this.$store.state.userInfo);else if(this.formData.id){var t={id:this.formData.id};this.$http.get("/api/user/findOne",t).then(function(t){var a=t.ok,n=t.data,r=t.msg;a?(delete n.createTime,e.formData=Object(s.a)({},e.formData,n)):e.$message.error(r)})}},dialogClose:function(){this.$refs.form.resetFields()},onlyUsername:function(e,t,a){var n=this;this.$http.post("/api/user/findOne",{username:t}).then(function(e){var t=e.ok,r=e.data;t&&!r?a():a(n.$t("validate.onlyUsername"))}).catch(function(e){return e})},encrypt:function(e,t){var a=new c.a;return a.setPublicKey(e),a.encrypt(t)},submitHandle:a.n(u)()(function(){var e=this;this.$refs.form.validate(function(t){if(t){var a=Object(s.a)({},e.formData);delete a.confirmPassword,delete a.originalPassword,e.submitLoading=!0,e.formatParam(a).catch(function(t){e.$message.error(t),e.submitLoading=!1})}})},1e3,{leading:!0,trailing:!1}),formatParam:function(e){var t,a=this;return this.formData.id&&!this.isChangePassword?(t="/api/user/updateOne",delete e.password,this.submitForm(t,e)):this.$http.get("/util/getPublicKey").then(function(n){var s=n.ok,l=n.key,o=n.msg;return s&&l?(e.password=a.encrypt(l,e.password),a.isChangePassword?(t="/user/changePassword",e.originalPassword=a.encrypt(l,a.formData.originalPassword)):t="/user/signUp",a.submitForm(t,e)):r.a.reject(o)})},submitForm:function(e,t){var a=this;return this.$http.post(e,t).then(function(e){var t=e.ok,n=e.msg;return a.submitLoading=!1,t?a.isChangePassword?a.$http.get("/user/signOut").then(function(){var e=a.$t("prompt.title"),t=a.$t("prompt.success")+","+a.$t("prompt.restartLogin"),n={type:"success",showClose:!1,confirmButtonText:a.$t("confirm")};return o.a.remove("token"),a.$nextTick(function(){a.visible=!1}),a.$alert(t,e,n)}).then(function(){a.$router.push("login")}):void a.$message({message:a.$t("prompt.success"),type:"success",duration:500,onClose:function(){a.visible=!1,a.$emit("refreshList")}}):r.a.reject(n)})}}},m=a("2877"),f=Object(m.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",e._b({attrs:{visible:e.visible,title:e.formData.id?e.$t("update"):e.$t("add"),"custom-class":"user-dialog min-w-600px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{opened:e.dialogOpen,closed:e.dialogClose,"update:visible":function(t){e.visible=t}}},"el-dialog",e.$attrs,!1),[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.submitLoading,expression:"submitLoading"}],ref:"form",attrs:{model:e.formData,rules:e.formRules,"validate-on-rule-change":!1,"label-width":"auto"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitHandle()}}},[a("el-form-item",{attrs:{prop:"username",label:e.$t("module.username")}},[a("el-input",{attrs:{placeholder:e.$t("module.username"),readonly:!!e.formData.id,maxlength:"30"},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username","string"==typeof t?t.trim():t)},expression:"formData.username"}})],1),e.isChangePassword?a("el-form-item",{attrs:{prop:"originalPassword",label:e.$t("module.originalPassword")}},[a("el-input",{attrs:{placeholder:e.$t("module.originalPassword"),maxlength:"30"},model:{value:e.formData.originalPassword,callback:function(t){e.$set(e.formData,"originalPassword","string"==typeof t?t.trim():t)},expression:"formData.originalPassword"}})],1):e._e(),e.isChangePassword||!e.formData.id?a("el-form-item",{attrs:{prop:"password",label:e.$t("module.password")}},[a("el-input",{attrs:{placeholder:e.$t("module.password"),maxlength:"30"},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password","string"==typeof t?t.trim():t)},expression:"formData.password"}})],1):e._e(),e.isChangePassword||!e.formData.id?a("el-form-item",{attrs:{prop:"confirmPassword",label:e.$t("module.confirmPassword")}},[a("el-input",{attrs:{placeholder:e.$t("module.confirmPassword"),maxlength:"30"},model:{value:e.formData.confirmPassword,callback:function(t){e.$set(e.formData,"confirmPassword","string"==typeof t?t.trim():t)},expression:"formData.confirmPassword"}})],1):e._e(),a("el-form-item",{attrs:{prop:"realName",label:e.$t("module.realName")}},[a("el-input",{attrs:{placeholder:e.$t("module.realName"),maxlength:"30"},model:{value:e.formData.realName,callback:function(t){e.$set(e.formData,"realName","string"==typeof t?t.trim():t)},expression:"formData.realName"}})],1),a("el-form-item",{attrs:{prop:"gender",label:e.$t("module.gender")}},[a("el-radio",{attrs:{label:"1"},model:{value:e.formData.gender,callback:function(t){e.$set(e.formData,"gender",t)},expression:"formData.gender"}},[e._v(e._s(e.$t("gender.gender_1")))]),a("el-radio",{attrs:{label:"2"},model:{value:e.formData.gender,callback:function(t){e.$set(e.formData,"gender",t)},expression:"formData.gender"}},[e._v(e._s(e.$t("gender.gender_2")))]),a("el-radio",{attrs:{label:"0"},model:{value:e.formData.gender,callback:function(t){e.$set(e.formData,"gender",t)},expression:"formData.gender"}},[e._v(e._s(e.$t("gender.gender_0")))])],1),a("el-form-item",{attrs:{prop:"email",label:e.$t("module.email")}},[a("el-input",{attrs:{placeholder:e.$t("module.email"),maxlength:"30"},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email","string"==typeof t?t.trim():t)},expression:"formData.email"}})],1),a("el-form-item",{class:{"margin-b-0":e.isChangePassword},attrs:{prop:"mobile",label:e.$t("module.mobile")}},[a("el-input",{attrs:{placeholder:e.$t("module.mobile"),maxlength:"30"},model:{value:e.formData.mobile,callback:function(t){e.$set(e.formData,"mobile","string"==typeof t?t.trim():t)},expression:"formData.mobile"}})],1),e.isChangePassword?e._e():a("el-form-item",{staticClass:"margin-b-0",attrs:{prop:"status",label:e.$t("module.status")}},[a("el-radio",{attrs:{label:"1"},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},[e._v(e._s(e.$t("module.enable")))]),a("el-radio",{attrs:{label:"0"},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},[e._v(e._s(e.$t("module.disable")))])],1)],1),a("template",{slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitHandle()}}},[e._v(e._s(e.$t("confirm")))])],1)],2)},[],!1,null,null,null);t.default=f.exports},"690a":function(e,t,a){e.exports=a.p+"img/avatar.e0cdea9e.png"},6944:function(e,t,a){},"93bf":function(e,t,a){
/*!
* screenfull
* v4.2.0 - 2019-04-01
* (c) Sindre Sorhus; MIT License
*/
!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},a=e.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,r=function(){for(var e,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,r=a.length,s={};n<r;n++)if((e=a[n])&&e[1]in t){for(n=0;n<e.length;n++)s[a[0][n]]=e[n];return s}return!1}(),s={change:r.fullscreenchange,error:r.fullscreenerror},l={request:function(e){return new Promise(function(a){var s=r.requestFullscreen,l=function(){this.off("change",l),a()}.bind(this);e=e||t.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[s]():e[s](n?Element.ALLOW_KEYBOARD_INPUT:{}),this.on("change",l)}.bind(this))},exit:function(){return new Promise(function(e){if(this.isFullscreen){var a=function(){this.off("change",a),e()}.bind(this);t[r.exitFullscreen](),this.on("change",a)}else e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,a){var n=s[e];n&&t.addEventListener(n,a,!1)},off:function(e,a){var n=s[e];n&&t.removeEventListener(n,a,!1)},raw:r};r?(Object.defineProperties(l,{isFullscreen:{get:function(){return Boolean(t[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[r.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[r.fullscreenEnabled])}}}),a?(e.exports=l,e.exports.default=l):window.screenfull=l):a?e.exports=!1:window.screenfull=!1}()},a80c:function(e,t,a){"use strict";a.r(t);var n=a("795b"),r=a.n(n),s=(a("7f7f"),a("cebc")),l=a("a78e"),o=a.n(l),i=a("93bf"),c=a.n(i),u=a("2f62"),d=a("d820"),m=a("c6a16"),f=a("b8c0"),h=a("3a2c"),p={name:"mainHeader",components:{SizeSelect:d.default,ThemePicker:m.default,LanguageSelect:f.default,changePassword:h.default},data:function(){return{renderChangePassword:!1}},created:function(){},mounted:function(){var e=this;document.getElementById("uploadAvatar").onchange=function(){e.fileInputChangeHandle(this)}},computed:Object(s.a)({},Object(u.d)(["userInfo"]),Object(u.d)("main",["isCollapse","headerFollowTheme"]),{userAvatar:function(){return this.userInfo&&this.userInfo.photo?this.$store.state.baseUrl+this.userInfo.photo:a("690a")}}),methods:Object(s.a)({},Object(u.c)("main",["toggleCollapse","refreshRouter"]),{toggleScreenFull:function(){if(c.a.enabled)return c.a.toggle(null);this.$message({message:"您的浏览器不支持此操作",type:"warning",duration:1e3})},handleCommand:function(e){this[e]()},logout:function(){var e=this,t=this.$t("prompt.title"),a=this.$t("prompt.info",{handle:this.$t("logout")}),n={confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel"),type:"warning"};this.$confirm(a,t,n).then(function(){e.$http.get("/user/signOut").then(function(){o.a.remove("token"),e.$router.push("/login")})}).catch(function(e){return e})},changePassword:function(){var e=this;this.renderChangePassword=!0,this.$nextTick(function(){e.$refs.changePassword.visible=!0})},uploadAvatar:function(){document.getElementById("uploadAvatar").click()},fileInputChangeHandle:function(e){var t,a=e.files[0];if(a){var n="image/jpeg"===a.type||"image/png"===a.type,r=a.size/1024/1024<2;if(!n)return this.$message.error(this.$t("validate.format",{attr:this.$t("module.image")}));if(!r)return this.$message.error(this.$t("validate.imageSize",{size:"2MB"}));(t=new FormData).append(e.name,a),this.uploadRequest(t)}},uploadRequest:function(e){var t=this;this.$http.post("/api/file/upload",e).then(function(e){var a=e.ok,n=e.data,s=e.msg;return a?(t.userInfo.photo&&t.$http.delete("/api/file/removeFile",{url:t.userInfo.photo}),t.$http.post("/api/user/updateOne",{id:t.userInfo.id,photo:n&&n[0].url||null})):r.a.reject(s)}).then(function(e,a){return e?t.$store.dispatch("getUserInfo"):r.a.reject(a)}).then(function(){t.$message.success(t.$t("prompt.success"))}).catch(function(e){t.$message.error(e)})}})},g=a("2877"),b=Object(g.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"main-header clearfix",class:{"follow-theme":e.headerFollowTheme}},[a("div",{staticClass:"header-brand bg-c-primary fl"},[e.isCollapse?a("h1",[e._v("\n      "+e._s(e.$t("brand.miniName"))+"\n    ")]):a("h1",[e._v(e._s(e.$t("brand.name")))])]),a("ul",{staticClass:"header-nav clearfix"},[a("li",{staticClass:"header-nav-item fl",on:{click:function(t){return e.toggleCollapse(!e.isCollapse)}}},[e.isCollapse?a("svg-icon",{attrs:{icon:"indent"}}):a("svg-icon",{attrs:{icon:"outdent"}})],1),a("li",{staticClass:"header-nav-item fr"},[a("el-dropdown",{attrs:{trigger:"click",size:"medium",placement:"bottom"},on:{command:e.handleCommand}},[a("div",{staticClass:"user-info clearfix"},[a("span",{staticClass:"avatar-wrapper fl",on:{click:function(t){return t.stopPropagation(),e.uploadAvatar(t)}}},[a("img",{attrs:{alt:"",src:e.userAvatar}})]),a("span",{staticClass:"fr"},[a("span",{staticClass:"user-name"},[e._v(e._s(e.userInfo&&e.userInfo.username))]),a("i",{staticClass:"icon-down el-icon-arrow-down"})])]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"logout"}},[a("svg-icon",{attrs:{icon:"logout"}}),e._v(" "+e._s(e.$t("logout"))+"\n          ")],1),a("el-dropdown-item",{attrs:{command:"changePassword"}},[a("svg-icon",{attrs:{icon:"unlock"}}),e._v(" "+e._s(e.$t("updatePassword.title"))+"\n          ")],1)],1)],1)],1),a("li",{staticClass:"header-nav-item fr",on:{click:e.toggleScreenFull}},[a("span",{staticClass:"trigger"},[a("svg-icon",{attrs:{icon:"fullscreen"}})],1)]),a("li",{staticClass:"header-nav-item fr"},[a("LanguageSelect",[a("svg-icon",{attrs:{icon:"translate"}})],1)],1),a("li",{staticClass:"header-nav-item fr"},[a("SizeSelect",[a("svg-icon",{attrs:{icon:"font-size"}})],1)],1),a("li",{staticClass:"header-nav-item fr"},[a("ThemePicker",[a("svg-icon",{attrs:{icon:"skin"}})],1)],1),a("li",{staticClass:"header-nav-item fr",on:{click:e.refreshRouter}},[a("span",{staticClass:"trigger"},[a("svg-icon",{attrs:{icon:"reload"}})],1)])]),a("input",{staticClass:"hidden",attrs:{id:"uploadAvatar",name:"avatar",type:"file"}}),e.renderChangePassword?a("changePassword",{ref:"changePassword",attrs:{isChangePassword:!0,"append-to-body":""}}):e._e()],1)},[],!1,null,null,null);t.default=b.exports},b8c0:function(e,t,a){"use strict";a.r(t);var n=a("a47e"),r={name:"LanguageSelect",data:function(){return{messages:n.messages}},methods:{handleLangSelect:function(e){this.$i18n.locale=e,this.$message({type:"success",message:this.$t("prompt.success"),duration:1e3}),localStorage.setItem("language",e)}}},s=a("2877"),l=Object(s.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dropdown",{attrs:{trigger:"click",size:"medium",placement:"bottom"},on:{command:e.handleLangSelect}},[a("span",{staticClass:"trigger"},[e._t("default")],2),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.messages,function(t,n){return a("el-dropdown-item",{key:n,attrs:{disabled:n===e.$i18n.locale,command:n}},[e._v("\n      "+e._s(t._lang)+"\n    ")])}),1)],1)},[],!1,null,null,null);t.default=l.exports},bcf6:function(e,t,a){"use strict";a.r(t),t.default=[{name:"default",color:"#409EFF",label:"默认色",hasBuild:!0},{name:"cyan",color:"#0BB2D4",label:"青色",hasBuild:!1},{name:"blue",color:"#3E8EF7",label:"蓝色",hasBuild:!1},{name:"green",color:"#11C26D",label:"绿色",hasBuild:!1},{name:"turquoise",color:"#17B3A3",label:"蓝绿色",hasBuild:!1},{name:"indigo",color:"#667AFA",label:"靛青色",hasBuild:!1},{name:"brown",color:"#997B71",label:"棕色",hasBuild:!1},{name:"purple",color:"#9463F7",label:"紫色",hasBuild:!1},{name:"gray",color:"#757575",label:"灰色",hasBuild:!1},{name:"orange",color:"#EB6709",label:"橙色",hasBuild:!1},{name:"pink",color:"#F74584",label:"粉红色",hasBuild:!1},{name:"yellow",color:"#FCB900",label:"黄色",hasBuild:!1},{name:"red",color:"#FF4C52",label:"红色",hasBuild:!1}]},c6a16:function(e,t,a){"use strict";a.r(t);var n=a("cebc"),r=a("2f62"),s=a("bcf6"),l={name:"ThemePicker",data:function(){return{theme:localStorage.getItem("theme")||"default",header:!1,sideMenu:!1,themeList:s.default}},created:function(){this.header=this.headerFollowTheme,this.sideMenu=this.sideMenuDarkSkin},computed:Object(n.a)({},Object(r.d)("main",["headerFollowTheme","sideMenuDarkSkin"])),methods:Object(n.a)({},Object(r.c)("main",["changeTheme","toggleHeaderSkin","toggleSideMenuSkin"]))},o=(a("09fe"),a("2877")),i=Object(o.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-popover",{attrs:{placement:"bottom",transition:"el-fade-in",trigger:"click"}},[a("div",{staticClass:"theme-picker-content"},[a("div",{staticClass:"theme-item"},[a("h3",[e._v(e._s(e.$t("header.title")))]),a("el-checkbox",{on:{change:e.toggleHeaderSkin},model:{value:e.header,callback:function(t){e.header=t},expression:"header"}},[e._v(e._s(e.$t("header.status")))])],1),a("div",{staticClass:"theme-item b-c-lighter"},[a("h3",[e._v(e._s(e.$t("sideMenu.title")))]),a("el-checkbox",{on:{change:e.toggleSideMenuSkin},model:{value:e.sideMenu,callback:function(t){e.sideMenu=t},expression:"sideMenu"}},[e._v(e._s(e.$t("sideMenu.status")))])],1),a("div",{staticClass:"theme-item b-c-lighter"},[a("h3",[e._v(e._s(e.$t("theme.title")))]),a("el-radio-group",{on:{change:e.changeTheme},model:{value:e.theme,callback:function(t){e.theme=t},expression:"theme"}},e._l(e.themeList,function(t){return a("el-radio",{key:t.name,attrs:{label:t.name}},[a("span",{style:{color:t.color}},[e._v(e._s(e.$t("theme."+t.name)))])])}),1)],1)]),a("span",{staticClass:"trigger",attrs:{slot:"reference"},slot:"reference"},[e._t("default")],2)])},[],!1,null,null,null);t.default=i.exports},d820:function(e,t,a){"use strict";a.r(t);var n=a("cebc"),r=a("2f62"),s={name:"SizeSelect",data:function(){return{sizeOptions:[{label:"default",value:"default"},{label:"medium",value:"medium"},{label:"small",value:"small"},{label:"mini",value:"mini"}]}},created:function(){},computed:Object(n.a)({},Object(r.d)("main",["size"])),methods:Object(n.a)({},Object(r.c)("main",["changeSize"]),{_changeSize:function(e){this.changeSize(e),this.$message({type:"success",message:this.$t("prompt.success"),duration:1e3})}})},l=a("2877"),o=Object(l.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dropdown",{attrs:{trigger:"click",size:"medium",placement:"bottom"},on:{command:e._changeSize}},[a("span",{staticClass:"trigger"},[e._t("default")],2),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.sizeOptions,function(t){return a("el-dropdown-item",{key:t.value,attrs:{disabled:e.size===t.value,command:t.value}},[e._v("\n      "+e._s(e.$t("size."+t.label))+"\n    ")])}),1)],1)},[],!1,null,"7afeb0e7",null);t.default=o.exports}}]);