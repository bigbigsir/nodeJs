{"version":3,"sources":["webpack:///./src/views/modules/user/addOrUpdate.vue?8028","webpack:///src/views/modules/user/addOrUpdate.vue","webpack:///./src/views/modules/user/addOrUpdate.vue?bce4","webpack:///./src/views/modules/user/addOrUpdate.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_b","attrs","visible","formData","id","$t","on","dialogOpen","dialogClose","$event","$attrs","directives","name","rawName","value","expression","ref","formRules","nativeOn","type","indexOf","_k","keyCode","key","submitHandle","model","callback","$$v","$set","trim","_e","isChangePassword","_v","_s","class","staticClass","slot","staticRenderFns","props","Boolean","default","data","imageUrl","submitLoading","username","originalPassword","password","confirmPassword","realName","gender","email","mobile","status","computed","validator","onlyUsername","trigger","$rules","methods","$http","get","url","params","then","ok","createTime","$refs","form","resetFields","post","encrypt","crypto","setPublicKey","plaintext","validate","valid","formatParam","submitForm","Promise","reject","msg","showClose","confirmButtonText","message","duration","onClose","component"],"mappings":"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","file":"js/chunk-2d0c4275.eeccf169.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',_vm._b({attrs:{\"visible\":_vm.visible,\"title\":_vm.formData.id ? _vm.$t('update') :_vm.$t('add'),\"custom-class\":\"user-dialog min-w-600px\",\"close-on-click-modal\":false,\"close-on-press-escape\":false},on:{\"opened\":_vm.dialogOpen,\"closed\":_vm.dialogClose,\"update:visible\":function($event){_vm.visible=$event}}},'el-dialog',_vm.$attrs,false),[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.submitLoading),expression:\"submitLoading\"}],ref:\"form\",attrs:{\"model\":_vm.formData,\"rules\":_vm.formRules,\"validate-on-rule-change\":false,\"label-width\":\"auto\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submitHandle()}}},[_c('el-form-item',{attrs:{\"prop\":\"username\",\"label\":_vm.$t('module.username')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('module.username'),\"readonly\":!!_vm.formData.id,\"maxlength\":\"30\"},model:{value:(_vm.formData.username),callback:function ($$v) {_vm.$set(_vm.formData, \"username\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.username\"}})],1),(_vm.isChangePassword)?_c('el-form-item',{attrs:{\"prop\":\"originalPassword\",\"label\":_vm.$t('module.originalPassword')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('module.originalPassword'),\"maxlength\":\"30\"},model:{value:(_vm.formData.originalPassword),callback:function ($$v) {_vm.$set(_vm.formData, \"originalPassword\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.originalPassword\"}})],1):_vm._e(),(_vm.isChangePassword||!_vm.formData.id)?_c('el-form-item',{attrs:{\"prop\":\"password\",\"label\":_vm.$t('module.password')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('module.password'),\"maxlength\":\"30\"},model:{value:(_vm.formData.password),callback:function ($$v) {_vm.$set(_vm.formData, \"password\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.password\"}})],1):_vm._e(),(_vm.isChangePassword||!_vm.formData.id)?_c('el-form-item',{attrs:{\"prop\":\"confirmPassword\",\"label\":_vm.$t('module.confirmPassword')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('module.confirmPassword'),\"maxlength\":\"30\"},model:{value:(_vm.formData.confirmPassword),callback:function ($$v) {_vm.$set(_vm.formData, \"confirmPassword\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.confirmPassword\"}})],1):_vm._e(),_c('el-form-item',{attrs:{\"prop\":\"realName\",\"label\":_vm.$t('module.realName')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('module.realName'),\"maxlength\":\"30\"},model:{value:(_vm.formData.realName),callback:function ($$v) {_vm.$set(_vm.formData, \"realName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.realName\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"gender\",\"label\":_vm.$t('module.gender')}},[_c('el-radio',{attrs:{\"label\":\"1\"},model:{value:(_vm.formData.gender),callback:function ($$v) {_vm.$set(_vm.formData, \"gender\", $$v)},expression:\"formData.gender\"}},[_vm._v(_vm._s(_vm.$t('gender.gender_1')))]),_c('el-radio',{attrs:{\"label\":\"2\"},model:{value:(_vm.formData.gender),callback:function ($$v) {_vm.$set(_vm.formData, \"gender\", $$v)},expression:\"formData.gender\"}},[_vm._v(_vm._s(_vm.$t('gender.gender_2')))]),_c('el-radio',{attrs:{\"label\":\"0\"},model:{value:(_vm.formData.gender),callback:function ($$v) {_vm.$set(_vm.formData, \"gender\", $$v)},expression:\"formData.gender\"}},[_vm._v(_vm._s(_vm.$t('gender.gender_0')))])],1),_c('el-form-item',{attrs:{\"prop\":\"email\",\"label\":_vm.$t('module.email')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('module.email'),\"maxlength\":\"30\"},model:{value:(_vm.formData.email),callback:function ($$v) {_vm.$set(_vm.formData, \"email\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.email\"}})],1),_c('el-form-item',{class:{'margin-b-0':_vm.isChangePassword},attrs:{\"prop\":\"mobile\",\"label\":_vm.$t('module.mobile')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('module.mobile'),\"maxlength\":\"30\"},model:{value:(_vm.formData.mobile),callback:function ($$v) {_vm.$set(_vm.formData, \"mobile\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.mobile\"}})],1),(!_vm.isChangePassword)?_c('el-form-item',{staticClass:\"margin-b-0\",attrs:{\"prop\":\"status\",\"label\":_vm.$t('module.status')}},[_c('el-radio',{attrs:{\"label\":\"1\"},model:{value:(_vm.formData.status),callback:function ($$v) {_vm.$set(_vm.formData, \"status\", $$v)},expression:\"formData.status\"}},[_vm._v(_vm._s(_vm.$t('module.enable')))]),_c('el-radio',{attrs:{\"label\":\"0\"},model:{value:(_vm.formData.status),callback:function ($$v) {_vm.$set(_vm.formData, \"status\", $$v)},expression:\"formData.status\"}},[_vm._v(_vm._s(_vm.$t('module.disable')))])],1):_vm._e()],1),_c('template',{slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(_vm._s(_vm.$t('cancel')))]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitHandle()}}},[_vm._v(_vm._s(_vm.$t('confirm')))])],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-dialog\n    v-bind=\"$attrs\"\n    @opened=\"dialogOpen\"\n    @closed=\"dialogClose\"\n    :visible.sync=\"visible\"\n    :title=\"formData.id ? $t('update') :$t('add')\"\n    custom-class=\"user-dialog min-w-600px\"\n    :close-on-click-modal=\"false\" :close-on-press-escape=\"false\">\n    <el-form :model=\"formData\" :rules=\"formRules\" ref=\"form\" @keyup.enter.native=\"submitHandle()\"\n             v-loading=\"submitLoading\" :validate-on-rule-change=\"false\" label-width=\"auto\">\n\n      <el-form-item prop=\"username\" :label=\"$t('module.username')\">\n        <el-input v-model.trim=\"formData.username\" :placeholder=\"$t('module.username')\" :readonly=\"!!formData.id\"\n                  maxlength=\"30\"></el-input>\n      </el-form-item>\n\n      <el-form-item prop=\"originalPassword\" :label=\"$t('module.originalPassword')\" v-if=\"isChangePassword\">\n        <el-input v-model.trim=\"formData.originalPassword\" :placeholder=\"$t('module.originalPassword')\"\n                  maxlength=\"30\"></el-input>\n      </el-form-item>\n\n      <el-form-item prop=\"password\" :label=\"$t('module.password')\"\n                    v-if=\"isChangePassword||!formData.id\">\n        <el-input v-model.trim=\"formData.password\" :placeholder=\"$t('module.password')\" maxlength=\"30\"></el-input>\n      </el-form-item>\n\n      <el-form-item prop=\"confirmPassword\" :label=\"$t('module.confirmPassword')\"\n                    v-if=\"isChangePassword||!formData.id\">\n        <el-input v-model.trim=\"formData.confirmPassword\" :placeholder=\"$t('module.confirmPassword')\"\n                  maxlength=\"30\"></el-input>\n      </el-form-item>\n\n      <el-form-item prop=\"realName\" :label=\"$t('module.realName')\">\n        <el-input v-model.trim=\"formData.realName\" :placeholder=\"$t('module.realName')\" maxlength=\"30\"></el-input>\n      </el-form-item>\n\n      <el-form-item prop=\"gender\" :label=\"$t('module.gender')\">\n        <el-radio v-model=\"formData.gender\" label=\"1\">{{$t('gender.gender_1')}}</el-radio>\n        <el-radio v-model=\"formData.gender\" label=\"2\">{{$t('gender.gender_2')}}</el-radio>\n        <el-radio v-model=\"formData.gender\" label=\"0\">{{$t('gender.gender_0')}}</el-radio>\n      </el-form-item>\n\n      <el-form-item prop=\"email\" :label=\"$t('module.email')\">\n        <el-input v-model.trim=\"formData.email\" :placeholder=\"$t('module.email')\" maxlength=\"30\"></el-input>\n      </el-form-item>\n\n      <el-form-item prop=\"mobile\" :label=\"$t('module.mobile')\" :class=\"{'margin-b-0':isChangePassword}\">\n        <el-input v-model.trim=\"formData.mobile\" :placeholder=\"$t('module.mobile')\" maxlength=\"30\"></el-input>\n      </el-form-item>\n\n      <el-form-item prop=\"status\" :label=\"$t('module.status')\" v-if=\"!isChangePassword\" class=\"margin-b-0\">\n        <el-radio v-model=\"formData.status\" label=\"1\">{{$t('module.enable')}}</el-radio>\n        <el-radio v-model=\"formData.status\" label=\"0\">{{$t('module.disable')}}</el-radio>\n      </el-form-item>\n\n    </el-form>\n    <template slot=\"footer\">\n      <el-button @click=\"visible = false\" type=\"text\">{{ $t('cancel') }}</el-button>\n      <el-button @click=\"submitHandle()\" type=\"primary\">{{ $t('confirm') }}</el-button>\n    </template>\n  </el-dialog>\n</template>\n\n<script>\n/**\n   * Created by bigBigSir on 2019/4/5\n   */\nimport cookies from 'js-cookie'\nimport JSEncrypt from 'jsencrypt'\nimport debounce from 'lodash/debounce'\n\nexport default {\n  name: 'addOrUpdate',\n  props: {\n    isChangePassword: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data () {\n    return {\n      imageUrl: null,\n      visible: false,\n      submitLoading: false,\n      formData: {\n        id: null,\n        username: null,\n        originalPassword: null,\n        password: null,\n        confirmPassword: null,\n        realName: null,\n        gender: '1',\n        email: null,\n        mobile: null,\n        status: '1'\n      }\n    }\n  },\n  computed: {\n    formRules () {\n      const onlyUsername = {\n        validator: this.onlyUsername,\n        trigger: 'blur'\n      }\n      return {\n        username: this.$rules([{ type: 'required' }, { type: 'username' }]).concat(this.formData.id ? [] : [onlyUsername]),\n        originalPassword: this.$rules([{ type: 'required' }, { type: 'password' }]),\n        password: this.$rules([{ type: 'required' }, { type: 'password' }]),\n        confirmPassword: this.$rules([{ type: 'required' }, { type: 'confirmPassword' }]),\n        realName: this.$rules([{ type: 'required' }]),\n        gender: this.$rules({ type: 'required' }),\n        email: this.$rules([{ type: 'required' }, { type: 'email' }]),\n        mobile: this.$rules([{ type: 'required' }, { type: 'mobile' }]),\n        status: this.$rules({ type: 'required' })\n      }\n    }\n  },\n  methods: {\n    // dialog打开回调\n    dialogOpen () {\n      if (this.isChangePassword) {\n        this.formData = { ...this.$store.state.userInfo }\n      } else if (this.formData.id) {\n        const url = '/api/user/findOne'\n        const params = { id: this.formData.id }\n        this.$http.get(url, params).then(({ ok, data, msg }) => {\n          if (ok) {\n            delete data.createTime\n            this.formData = { ...this.formData, ...data }\n          } else {\n            this.$message.error(msg)\n          }\n        })\n      }\n    },\n    // dialog关闭回调\n    dialogClose () {\n      this.$refs.form.resetFields()\n    },\n    // 验证username唯一\n    onlyUsername (rule, value, callback) {\n      this.$http.post('/api/user/findOne', { username: value }).then(({ ok, data }) => {\n        if (ok && !data) {\n          callback()\n        } else {\n          callback(this.$t('validate.onlyUsername'))\n        }\n      }).catch(e => e)\n    },\n    // 加密密码\n    encrypt (key, plaintext) {\n      const crypto = new JSEncrypt()\n      crypto.setPublicKey(key)\n      return crypto.encrypt(plaintext)\n    },\n    // 提交事件\n    submitHandle: debounce(function () {\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          const params = { ...this.formData }\n          delete params.confirmPassword\n          delete params.originalPassword\n          this.submitLoading = true\n          this.formatParam(params).catch((msg) => {\n            this.$message.error(msg)\n            this.submitLoading = false\n          })\n        }\n      })\n    }, 1000, { leading: true, trailing: false }),\n    // 格式化参数\n    formatParam (params) {\n      let url\n      if (this.formData.id && !this.isChangePassword) { // 修改用户信息\n        url = '/api/user/updateOne'\n        delete params.password\n        return this.submitForm(url, params)\n      }\n      return this.$http.get('/util/getPublicKey').then(({ ok, key, msg }) => {\n        if (ok && key) {\n          params.password = this.encrypt(key, params.password)\n          if (this.isChangePassword) { // 修改密码，用户信息\n            url = '/user/changePassword'\n            params.originalPassword = this.encrypt(key, this.formData.originalPassword)\n          } else { // 添加用户\n            url = '/user/signUp'\n          }\n          return this.submitForm(url, params)\n        } else {\n          return Promise.reject(msg)\n        }\n      })\n    },\n    // 提交表单\n    submitForm (url, params) {\n      return this.$http.post(url, params).then(({ ok, msg }) => {\n        this.submitLoading = false\n        if (ok) {\n          if (this.isChangePassword) {\n            return this.$http.get('/user/signOut').then(() => {\n              const title = this.$t('prompt.title')\n              const info = this.$t('prompt.success') + ',' + this.$t('prompt.restartLogin')\n              const confirmConfig = {\n                type: 'success',\n                showClose: false,\n                confirmButtonText: this.$t('confirm')\n              }\n              cookies.remove('token')\n              this.$nextTick(() => {\n                this.visible = false\n              })\n              return this.$alert(info, title, confirmConfig)\n            }).then(() => {\n              this.$router.push('login')\n            })\n          }\n          this.$message({\n            message: this.$t('prompt.success'),\n            type: 'success',\n            duration: 500,\n            onClose: () => {\n              this.visible = false\n              this.$emit('refreshList')\n            }\n          })\n        } else {\n          return Promise.reject(msg)\n        }\n      })\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addOrUpdate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addOrUpdate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addOrUpdate.vue?vue&type=template&id=f4642d32&\"\nimport script from \"./addOrUpdate.vue?vue&type=script&lang=js&\"\nexport * from \"./addOrUpdate.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}